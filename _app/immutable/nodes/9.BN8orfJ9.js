import{g as x}from"../chunks/entry.LB63-QWc.js";import{a as I,w as B}from"../chunks/api.CrW3bbf5.js";import{e as y}from"../chunks/index.D89dlfRs.js";import"../chunks/disclose-version.Do00YCK8.js";import{R as S,N as v,T,O as n,ab as f,a8 as M,P as C,Q as $,aM as j,ao as A,t as O,aB as H}from"../chunks/index.DA0p4cwN.js";import{h as N}from"../chunks/svelte-head.BDXRvxS4.js";import{c as P,a as g,t as b}from"../chunks/template.DhZSfuyH.js";import{r as W}from"../chunks/routes.CSR1aWYq.js";import"../chunks/legacy.Di0YPgtu.js";import{t as _}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.CHfARvnT.js";import{H as z}from"../chunks/Header.-8bF7zC7.js";import{T as F,a as L,M as Q}from"../chunks/Menu.C6EcqQy6.js";import{s as R,i as Y,a as q}from"../chunks/store.Dcx3tYqb.js";import{p as G,a as J}from"../chunks/props.DJkALSdT.js";import{i as K}from"../chunks/auth.DqoLYEfd.js";import{S as U}from"../chunks/SignIn.vB6XFGih.js";import{T as V,B as X}from"../chunks/Button.DABpvw7T.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new a.Error().stack;t&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[t]="f07667a2-2228-4999-93a4-a8ab68aec3a9",a._sentryDebugIdIdentifier="sentry-dbid-f07667a2-2228-4999-93a4-a8ab68aec3a9")}catch{}})();const w=async({params:a})=>{const t=a.id;t||y(404);const e=await I.getTree(t);return e.status!==200&&y(404),{id:t,tree:e.data}},Z=w?B(w):void 0,Ie=Object.freeze(Object.defineProperty({__proto__:null,load:Z},Symbol.toStringTag,{value:"Module"}));function ee(a,t){let e=G(t,"value",12,"");V(a,{label:"Comment",multiline:!0,hint:"Some hints or suggested edits.",get value(){return e()},set value(d){e(d)},$$legacy:!0})}var te=b('<p>Would you like to add a comment?</p> <!> <div class="buttons"><!></div>',1),ae=b("<p>You need to be authenticated to add comments.</p> <!>",1);function oe(a,t){S(t,!0);const e=R(),d=()=>q(K,"$isAuthenticated",e);let i=j("");const u=()=>{t.onSubmit(f(i))};var m=P(),c=v(m);{var l=r=>{var s=te(),o=n(v(s),2);ee(o,{get value(){return f(i)},set value(E){M(i,J(E))}});var h=n(o,2),D=C(h),k=A(()=>!f(i));X(D,{onClick:u,label:"Submit comment",get disabled(){return f(k)}}),$(h),g(r,s)},p=r=>{var s=ae(),o=n(v(s),2);U(o,{}),g(r,s)};Y(c,r=>{d()?r(l):r(p,!1)})}g(a,m),T()}var re=b('<!> <!> <!> <!> <div class="container svelte-11j1l8y"><p>No comments for this tree yet.</p> <!></div>',1);function Se(a,t){S(t,!0);const e=t.data.tree,d=s=>{I.addComment(e.id,s).then(o=>{o.status>=200&&o.status<300?(_.push("Comment added."),x(W.treeDetails(e.id))):(console.info(`Error ${o.status} adding a comment.`),_.push("Error adding comment."))}).catch(o=>{console.error("Exception while adding a comment.",o),_.push("Error adding comment.")})};var i=re();N(s=>{O(()=>H.title=`${e.species??""} - Details`)});var u=v(i);z(u,{title:"Tree"});var m=n(u,2);F(m,{get title(){return e.species}});var c=n(m,2);L(c,{get tree(){return e.id},active:"comments"});var l=n(c,2);Q(l,{get id(){return e.id}});var p=n(l,2),r=n(C(p),2);oe(r,{onSubmit:d}),$(p),g(a,i),T()}export{Se as component,Ie as universal};
//# sourceMappingURL=9.BN8orfJ9.js.map
