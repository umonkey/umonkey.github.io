import{g as G}from"../chunks/entry.BRSuLOjh.js";import{w as J,a as K}from"../chunks/api.3STlV-ud.js";import{D as j}from"../chunks/constants.B0xsgXxU.js";import"../chunks/disclose-version.CKFfokN4.js";import{j as Q,aF as n,f as H,k as V,aE as X,s as o,a4 as e,ab as s,e as L,g as x}from"../chunks/index.6fWcJMZL.js";import{h as Z}from"../chunks/svelte-head.BsK74sys.js";import{a as z,t as W}from"../chunks/template.B1mf6kze.js";import{a as l}from"../chunks/props.Drv8p2JQ.js";import"../chunks/legacy.C5Ep07oP.js";import{t as B}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.DZL4l-7g.js";import{r as ee}from"../chunks/routes.B1Jkliqe.js";import{A as te}from"../chunks/AuthWrapper.BfrDaFFB.js";import{B as M}from"../chunks/TextInput.BiqbpmT0.js";import{L as ae,S as re,H as oe,C as se,a as ne,b as le,Y as ie,N as de}from"../chunks/YearInput.B1i40Lpu.js";import{H as ue}from"../chunks/Header.CqSyHY-W.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new r.Error().stack;i&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[i]="b2621c86-93da-4f2e-9ba4-618105389d44",r._sentryDebugIdIdentifier="sentry-dbid-b2621c86-93da-4f2e-9ba4-618105389d44")}catch{}})();const O=({url:r})=>{const i=parseFloat(r.searchParams.get("lat")??j[0]),d=parseFloat(r.searchParams.get("lng")??j[1]);return{lat:i,lng:d}},ce=O?J(O):void 0,ke=Object.freeze(Object.defineProperty({__proto__:null,load:ce},Symbol.toStringTag,{value:"Module"}));var pe=W('<!> <!> <!> <!> <!> <!> <!> <!> <div class="buttons"><!> <!></div>',1),me=W('<!> <div class="form svelte-1jizvdx"><!></div>',1);function Fe(r,i){Q(i,!0);let d=n(!1),p=n(""),m=n(""),v=n(""),f=n(""),g=n(""),_=n(""),u=n(l([i.data.lat,i.data.lng])),b=n("");const c=a=>{if(a===""||a==="0")return null;const h=parseFloat(a);return isNaN(h)?null:h},Y=()=>{s(d,!0),K.addTree({points:[{lat:e(u)[0],lon:e(u)[1]}],species:e(p),height:c(e(m)),diameter:c(e(v)),circumference:c(e(f)),state:e(g),notes:e(_),year:c(e(b))}).then(a=>{a.status>=200&&a.status<400?G(ee.treeDetails(a.data.trees[0].id)):(console.error(`Error ${a.status} adding tree.`),B.push("Error adding tree."))}).catch(a=>{console.error(`Error adding tree: ${a}.`),B.push("Error adding tree.")}).finally(()=>{s(d,!1)})},R=()=>{history.back()};var y=me();Z(a=>{X.title="Add tree"});var I=H(y);ue(I,{title:"Add Tree"});var C=o(I,2),U=L(C);te(U,{children:(a,h)=>{var E=pe(),S=H(E);ae(S,{label:"Confirm location",get value(){return e(u)},set value(t){s(u,l(t))}});var w=o(S,2);re(w,{get value(){return e(p)},set value(t){s(p,l(t))}});var A=o(w,2);oe(A,{get value(){return e(m)},set value(t){s(m,l(t))}});var D=o(A,2);se(D,{get value(){return e(v)},set value(t){s(v,l(t))}});var $=o(D,2);ne($,{get value(){return e(f)},set value(t){s(f,l(t))}});var k=o($,2);le(k,{get value(){return e(g)},set value(t){s(g,l(t))}});var F=o(k,2);ie(F,{get value(){return e(b)},set value(t){s(b,l(t))}});var N=o(F,2);de(N,{get value(){return e(_)},set value(t){s(_,l(t))}});var P=o(N,2),T=L(P);M(T,{type:"submit",label:"Add tree",onClick:Y,get disabled(){return e(d)}});var q=o(T,2);M(q,{type:"cancel",label:"Cancel",onClick:R,get disabled(){return e(d)}}),x(P),z(a,E)},$$slots:{default:!0}}),x(C),z(r,y),V()}export{Fe as component,ke as universal};
