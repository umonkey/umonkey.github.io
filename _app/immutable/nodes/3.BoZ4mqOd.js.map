{"version":3,"file":"3.BoZ4mqOd.js","sources":["../../../../../../src/routes/auth/+page.ts?sentry-auto-wrap","../../../../../../src/routes/auth/+page.ts","../../../../../../src/routes/auth/+page.svelte"],"sourcesContent":["import { apiClient } from '$lib/api';\nimport { authState } from '$lib/stores/auth';\n\nexport const load: Load = async ({\n\turl\n}): Promise<{\n\tredirect: string;\n}> => {\n\tconst token = url.searchParams.get('token');\n\tconst state = url.searchParams.get('state');\n\n\tconsole.debug(`[auth] token=${token}`);\n\tconsole.debug(`[auth] state=${state}`);\n\n\tconst res = await apiClient.getMe(token);\n\n\tif (res.status !== 200) {\n\t\tconsole.error('[auth] Error fetching user data');\n\t\terror(401);\n\t}\n\n\tconsole.info(`[auth] Logged in as ${res.data.name}`);\n\n\tauthState.set({\n\t\ttoken,\n\t\tname: res.data.name,\n\t\tpicture: res.data.picture\n\t});\n\n\treturn {\n\t\tredirect: state\n\t};\n};\n","import { wrapLoadWithSentry } from \"@sentry/sveltekit\";import * as userModule from \"/home/hex/src/umonkey/treemap/frontend-v2/src/routes/auth/+page.ts?sentry-auto-wrap\";export const load = userModule.load ? wrapLoadWithSentry(userModule.load) : undefined;export * from \"/home/hex/src/umonkey/treemap/frontend-v2/src/routes/auth/+page.ts?sentry-auto-wrap\";","<script lang=\"ts\">\n\tconst { data } = $props();\n\twindow.location.href = data.redirect;\n</script>\n"],"names":["load","url","token","state","res","apiClient","authState","userModule.load","wrapLoadWithSentry"],"mappings":"uiBAGO,MAAMA,EAAa,MAAO,CAChC,IAAAC,CACD,IAEM,CACL,MAAMC,EAAQD,EAAI,aAAa,IAAI,OAAO,EACpCE,EAAQF,EAAI,aAAa,IAAI,OAAO,EAElC,QAAA,MAAM,gBAAgBC,CAAK,EAAE,EAC7B,QAAA,MAAM,gBAAgBC,CAAK,EAAE,EAErC,MAAMC,EAAM,MAAMC,EAAU,MAAMH,CAAK,EAEnC,OAAAE,EAAI,SAAW,MAClB,QAAQ,MAAM,iCAAiC,EAC/C,MAAM,GAAG,GAGV,QAAQ,KAAK,uBAAuBA,EAAI,KAAK,IAAI,EAAE,EAEnDE,EAAU,IAAI,CACb,MAAAJ,EACA,KAAME,EAAI,KAAK,KACf,QAASA,EAAI,KAAK,OAAA,CAClB,EAEM,CACN,SAAUD,CACX,CACD,EChCsLH,EAAOO,EAAkBC,EAAmBD,CAAe,EAAI,mICEpP,OAAO,SAAS,YAAY"}