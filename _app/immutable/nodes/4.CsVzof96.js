import"../chunks/entry.Dyutd5fJ.js";import{w as oe,a as ie}from"../chunks/api.rh5dHDph.js";import"../chunks/disclose-version.DERG6jGP.js";import{h as z,a as ne,i as le,b as ce,aN as ve,w as E,q as de,aa as R,K as U,J,aj as K,ay as W,aO as B,n as S,c as Q,p as q,aP as fe,d as ue,a0 as me,R as F,P as g,Q as u,T as G,N as T,ab as x,t as D,O as I,a3 as pe,a4 as te,a8 as V,aD as _e,aM as he}from"../chunks/index.DU9F274A.js";import{h as ge}from"../chunks/svelte-head.Q9VbTWXu.js";import{a as h,t as k,c as O,f as X}from"../chunks/template.C9863Yte.js";import{p as Y,a as be}from"../chunks/props.DsUX4Z2t.js";import{i as Z,b as $,s as ye,a as ee}from"../chunks/store.L8JhBUwZ.js";import{H as we}from"../chunks/Header.DTRMnEbp.js";import{M as Ce}from"../chunks/Map.ClHP8RQ7.js";import{i as xe}from"../chunks/legacy.BFk7W94u.js";import{s as j}from"../chunks/attributes.Cj1Aypci.js";import{e as De}from"../chunks/events.DO1M7CFm.js";import{C as Ie}from"../chunks/CloseIcon.DcYiJ03c.js";import{e as ke,i as Me}from"../chunks/each.CuDHKvZb.js";import{r as L}from"../chunks/routes.BB24Vop3.js";import{s as Te}from"../chunks/trees.Clio5HXD.js";import{l as re}from"../chunks/auth.DGbMZmaI.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="3a59420c-dcdd-4f02-8b5d-ec4474a25355",e._sentryDebugIdIdentifier="sentry-dbid-3a59420c-dcdd-4f02-8b5d-ec4474a25355")}catch{}})();const A=0,M=1,H=2;function Ne(e,s,o,w,b){z&&ne();var c=e,f=le(),y=me,i=R,v,a,t,m=(f?U:J)(void 0),d=(f?U:J)(void 0),p=!1;function r(n,_){p=!0,_&&(K(l),W(l),B(y));try{n===A&&o&&(v?S(v):v=Q(()=>o(c))),n===M&&w&&(a?S(a):a=Q(()=>w(c,m))),n===H&&b&&(t?S(t):t=Q(()=>b(c,d))),n!==A&&v&&q(v,()=>v=null),n!==M&&a&&q(a,()=>a=null),n!==H&&t&&q(t,()=>t=null)}finally{_&&(B(null),W(null),K(null),fe())}}var l=ce(()=>{if(i!==(i=s())){if(ve(i)){var n=i;p=!1,n.then(_=>{n===i&&(E(m,_),r(M,!0))},_=>{if(n===i)throw E(d,_),r(H,!0),d.v}),z||de(()=>{p||r(A,!0)})}else E(m,i),r(M,!1);return()=>i=R}});z&&(c=ue)}const ae=({url:e})=>({searchQuery:e.searchParams.get("q")}),Pe=ae?oe(ae):void 0,oa=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var ze=k('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Ee=k('<div class="images svelte-5k02eh"></div>'),Se=k('<div class="gallery svelte-5k02eh"><!></div>');function Qe(e,s){F(s,!0);var o=Se(),w=g(o);Ne(w,()=>ie.getTree(s.tree.id),null,(b,c)=>{var f=O(),y=T(f);{var i=a=>{var t=X("Failed to load photos.");h(a,t)},v=a=>{var t=O(),m=T(t);{var d=r=>{var l=X("No images for this tree.");h(r,l)},p=r=>{var l=Ee();ke(l,21,()=>x(c).data.files,Me,(n,_)=>{var C=ze(),P=g(C);D(()=>j(P,"href",L.treeDetails(s.tree.id)));var se=g(P);D(()=>j(se,"src",L.file(x(_).small_id))),u(P),u(C),h(n,C)}),u(l),h(r,l)};Z(m,r=>{x(c).data.files.length==0?r(d):r(p,!1)},!0)}h(a,t)};Z(y,a=>{x(c).status!=200?a(i):a(v,!1)})}h(b,f)}),u(o),h(e,o),G()}var qe=k('<div class="preview svelte-mz5173"><div class="header svelte-mz5173"><div class="title svelte-mz5173"><a> </a></div> <button class="close svelte-mz5173"><!></button></div> <div class="props"> </div> <!></div>');function Ae(e,s){F(s,!1);let o=Y(s,"tree",8),w=Y(s,"onClose",8);xe();var b=O(),c=T(b);{var f=y=>{var i=qe(),v=g(i),a=g(v),t=g(a);D(()=>j(t,"href",L.treeDetails(o().id)));var m=g(t,!0);u(t),u(a);var d=I(a,2),p=g(d);Ie(p,{}),u(d),u(v);var r=I(v,2),l=g(r,!0);D(()=>$(l,Te(o()))),u(r);var n=I(r,2);Qe(n,{get tree(){return o()}}),u(i),D(()=>$(m,o().species)),De("click",d,function(..._){var C;(C=w())==null||C.apply(this,_)}),h(y,i)};Z(c,y=>{o()&&y(f)})}h(e,b),G()}const He=[40.181389,44.514444],N=pe(re.read("mapState")||{center:He,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const Oe=te(N,e=>e.center),Ze=te(N,e=>e.zoom);var je=k('<!> <div class="mapContainer svelte-fq13u2"><!> <!></div>',1);function ia(e,s){F(s,!0);const o=ye(),w=()=>ee(Oe,"$mapCenter",o),b=()=>ee(Ze,"$mapZoom",o),c=s.data.searchQuery;let f=he(void 0);const y=c?`Map: ${c}`:"Map",i=l=>{V(f,be(l))},v=()=>{V(f,void 0)},a=(l,n)=>{N.set({center:l,zoom:n})};var t=je();ge(l=>{_e.title="Tree Map"});var m=T(t);we(m,{title:y});var d=I(m,2),p=g(d);Ce(p,{get center(){return w()},get zoom(){return b()},onChange:i,onMove:a,searchQuery:c});var r=I(p,2);Ae(r,{get tree(){return x(f)},onClose:v}),u(d),h(e,t),G()}export{ia as component,oa as universal};
