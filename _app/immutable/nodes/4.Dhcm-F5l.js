import"../chunks/entry.Dod8blnn.js";import{w as oe,a as ie}from"../chunks/api.Bi0sabdr.js";import"../chunks/disclose-version.CUXYTn5h.js";import{h as E,a as ne,i as le,b as ce,aN as ve,w as S,q as fe,aa as G,K as R,J,aj as K,ay as W,aO as B,n as q,c as z,p as A,aP as de,d as ue,a0 as me,T as U,P as b,R as u,U as F,N as T,ab as x,t as D,O as I,a3 as pe,a4 as te,aD as _e,aM as he,a8 as V}from"../chunks/index.z6kBXauZ.js";import{h as be}from"../chunks/svelte-head.DEEuaWfR.js";import{a as h,t as k,c as Q,f as X}from"../chunks/template.B-dqGRda.js";import{p as Y,a as ge}from"../chunks/props.pyAFSr6r.js";import{i as Z,b as $,s as ye,a as ee}from"../chunks/store.D4VmzRFx.js";import{H as we}from"../chunks/Header.DWY7kv7h.js";import{M as Ce}from"../chunks/Map.Bq14yXKN.js";import{i as xe}from"../chunks/legacy.DB9raPp5.js";import{s as j}from"../chunks/attributes.B19BiYAU.js";import{e as De}from"../chunks/events.D7MPWNQN.js";import{C as Ie}from"../chunks/CloseIcon.BV17bA_-.js";import{e as ke,i as Me}from"../chunks/each.4NNzQdmB.js";import{r as L}from"../chunks/routes.CGGklALb.js";import{s as Te}from"../chunks/trees.CsTC48i7.js";import{l as re}from"../chunks/auth.BfMl7xlK.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="e9db1892-426c-4d74-ab62-5cac43c18692",e._sentryDebugIdIdentifier="sentry-dbid-e9db1892-426c-4d74-ab62-5cac43c18692")}catch{}})();const H=0,M=1,O=2;function Ne(e,s,o,w,g){E&&ne();var c=e,d=le(),y=me,i=G,v,a,t,m=(d?R:J)(void 0),f=(d?R:J)(void 0),p=!1;function r(n,_){p=!0,_&&(K(l),W(l),B(y));try{n===H&&o&&(v?q(v):v=z(()=>o(c))),n===M&&w&&(a?q(a):a=z(()=>w(c,m))),n===O&&g&&(t?q(t):t=z(()=>g(c,f))),n!==H&&v&&A(v,()=>v=null),n!==M&&a&&A(a,()=>a=null),n!==O&&t&&A(t,()=>t=null)}finally{_&&(B(null),W(null),K(null),de())}}var l=ce(()=>{if(i!==(i=s())){if(ve(i)){var n=i;p=!1,n.then(_=>{n===i&&(S(m,_),r(M,!0))},_=>{if(n===i)throw S(f,_),r(O,!0),f.v}),E||fe(()=>{p||r(H,!0)})}else S(m,i),r(M,!1);return()=>i=G}});E&&(c=ue)}const ae=({url:e})=>({searchQuery:e.searchParams.get("q")}),Pe=ae?oe(ae):void 0,oa=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var Ee=k('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Se=k('<div class="images svelte-5k02eh"></div>'),qe=k('<div class="gallery svelte-5k02eh"><!></div>');function ze(e,s){U(s,!0);var o=qe(),w=b(o);Ne(w,()=>ie.getTree(s.tree.id),null,(g,c)=>{var d=Q(),y=T(d);{var i=a=>{var t=X("Failed to load photos.");h(a,t)},v=a=>{var t=Q(),m=T(t);{var f=r=>{var l=X("No images for this tree.");h(r,l)},p=r=>{var l=Se();ke(l,21,()=>x(c).data.files,Me,(n,_)=>{var C=Ee(),P=b(C);D(()=>j(P,"href",L.treeDetails(s.tree.id)));var se=b(P);D(()=>j(se,"src",L.file(x(_).small_id))),u(P),u(C),h(n,C)}),u(l),h(r,l)};Z(m,r=>{x(c).data.files.length==0?r(f):r(p,!1)},!0)}h(a,t)};Z(y,a=>{x(c).status!=200?a(i):a(v,!1)})}h(g,d)}),u(o),h(e,o),F()}var Ae=k('<div class="preview svelte-1hfbc1n"><div class="header svelte-1hfbc1n"><div class="title svelte-1hfbc1n"><a> </a></div> <button class="close svelte-1hfbc1n"><!></button></div> <div class="props"> </div> <!></div>');function He(e,s){U(s,!1);let o=Y(s,"tree",8),w=Y(s,"onClose",8);xe();var g=Q(),c=T(g);{var d=y=>{var i=Ae(),v=b(i),a=b(v),t=b(a);D(()=>j(t,"href",L.treeDetails(o().id)));var m=b(t,!0);u(t),u(a);var f=I(a,2),p=b(f);Ie(p,{}),u(f),u(v);var r=I(v,2),l=b(r,!0);D(()=>$(l,Te(o()))),u(r);var n=I(r,2);ze(n,{get tree(){return o()}}),u(i),D(()=>$(m,o().species)),De("click",f,function(..._){var C;(C=w())==null||C.apply(this,_)}),h(y,i)};Z(c,y=>{o()&&y(d)})}h(e,g),F()}const Oe=[40.181389,44.514444],N=pe(re.read("mapState")||{center:Oe,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const Qe=te(N,e=>e.center),Ze=te(N,e=>e.zoom);var je=k('<!> <div class="mapContainer svelte-1830sq3"><!> <!></div>',1);function ia(e,s){U(s,!0);const o=ye(),w=()=>ee(Qe,"$mapCenter",o),g=()=>ee(Ze,"$mapZoom",o),c=s.data.searchQuery;let d=he(void 0);const y=c?`Map: ${c}`:"Map",i=l=>{V(d,ge(l))},v=()=>{V(d,void 0)},a=(l,n)=>{N.set({center:l,zoom:n})};var t=je();be(l=>{_e.title="Tree Map"});var m=T(t);we(m,{title:y});var f=I(m,2),p=b(f);Ce(p,{get center(){return w()},get zoom(){return g()},onChange:i,onMove:a,searchQuery:c});var r=I(p,2);He(r,{get tree(){return x(d)},onClose:v}),u(f),h(e,t),F()}export{ia as component,oa as universal};
