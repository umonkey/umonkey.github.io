import{e as S}from"../chunks/index.CzR0xuCU.js";import{a as T}from"../chunks/api.BlGb2U4K.js";import{c as j,a as f,t as h,h as A}from"../chunks/disclose-version.CLZNo6Mi.js";import{W as y,S as g,X as C,T as s,P as v,ac as B,U as $,V as k,aF as M,R as w,t as D,a5 as F}from"../chunks/utils.BFcvIjER.js";import{g as H}from"../chunks/entry.BPk_L4t5.js";import{r as O}from"../chunks/routes.Du5GAGsL.js";import"../chunks/legacy.j8GUzb4P.js";import{t as _}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.CwQvoe9r.js";import{H as P}from"../chunks/Header.CcdmL7Ww.js";import{T as W,a as z,M as N}from"../chunks/Menu.CdNshDZ6.js";import{i as R}from"../chunks/if.i8DL9Ox0.js";import{p as U,a as V}from"../chunks/props.xLB6besP.js";import{s as X,a as Y}from"../chunks/store.MZmcVWKZ.js";import{i as q}from"../chunks/auth.DCNBl5R4.js";import{S as G}from"../chunks/SignIn.DpTkY_Wd.js";import{T as J,B as K}from"../chunks/Button.CSDBrNmp.js";const L=async({params:n})=>{const e=n.id;e||S(404);const t=await T.getTree(e);return t.status!==200&&S(404),{id:e,tree:t.data}},bt=Object.freeze(Object.defineProperty({__proto__:null,load:L},Symbol.toStringTag,{value:"Module"}));function Q(n,e){let t=U(e,"value",12,"");J(n,{label:"Comment",multiline:!0,hint:"Some hints or suggested edits.",get value(){return t()},set value(m){t(m)},$$legacy:!0})}var Z=h('<p>Would you like to add a comment?</p> <!> <div class="buttons svelte-1klurmp"><!></div>',1),tt=h("<p>You need to be authenticated to add comments.</p> <!>",1);function et(n,e){y(e,!0);const t=X(),m=()=>Y(q,"$isAuthenticated",t);let i=M("");const u=()=>{e.onSubmit(v(i))};var d=j(),l=g(d);{var c=o=>{var r=Z(),a=s(g(r),2);Q(a,{get value(){return v(i)},set value(I){B(i,V(I))}});var b=s(a,2),x=$(b),E=w(()=>!v(i));K(x,{onClick:u,label:"Submit comment",get disabled(){return v(E)}}),k(b),f(o,r)},p=o=>{var r=tt(),a=s(g(r),2);G(a),f(o,r)};R(l,o=>{m()?o(c):o(p,!1)})}f(n,d),C()}var at=h('<!> <!> <!> <!> <div class="container svelte-11j1l8y"><p>No comments for this tree yet.</p> <!></div>',1);function St(n,e){y(e,!0);const t=e.data.tree,m=r=>{T.addComment(t.id,r).then(a=>{a.status>=200&&a.status<300?(_.push("Comment added."),H(O.treeDetails(t.id))):(console.info(`Error ${a.status} adding a comment.`),_.push("Error adding comment."))}).catch(a=>{console.error("Exception while adding a comment.",a),_.push("Error adding comment.")})};var i=at();A(r=>{D(()=>F.title=`${t.species??""} - Details`)});var u=g(i);P(u,{title:"Tree"});var d=s(u,2);W(d,{get title(){return t.species}});var l=s(d,2);z(l,{get tree(){return t.id},active:"comments"});var c=s(l,2);N(c,{get id(){return t.id}});var p=s(c,2),o=s($(p),2);et(o,{onSubmit:m}),k(p),f(n,i),C()}export{St as component,bt as universal};
