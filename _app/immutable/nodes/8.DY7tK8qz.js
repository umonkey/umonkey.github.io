import{g as x}from"../chunks/entry.BuLyP_CK.js";import{w as M}from"../chunks/load.DiFz2wEx.js";import{e as y}from"../chunks/index.iWHf24sY.js";import{a as w}from"../chunks/api.CjncwczA.js";import{c as j,a as v,t as _}from"../chunks/disclose-version.CCZB9n-N.js";import{N as S,J as g,O as C,K as n,a9 as f,a7 as A,L as T,M as $,aI as B,am as O,t as H,ay as L}from"../chunks/utils._tGpIG1X.js";import{h as N}from"../chunks/svelte-head.DogzZgVE.js";import{r as W}from"../chunks/routes.CJ0tSe2b.js";import"../chunks/legacy.BLYxeSQ6.js";import{t as b}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.CjpeHfv3.js";import{H as z}from"../chunks/Header.CR9Hkajd.js";import{T as F,a as J,M as K}from"../chunks/Menu.B-Jx6A_N.js";import{i as P}from"../chunks/if.BWgjNr8K.js";import{p as Y,a as q}from"../chunks/props.Clfp1Ka8.js";import{s as G,a as Q}from"../chunks/store.6HNy5CFF.js";import{i as R}from"../chunks/auth.Dm5DXndm.js";import{S as U}from"../chunks/SignIn.C_vnX1R-.js";import{T as V,B as X}from"../chunks/Button.CJVo6Ffy.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new a.Error().stack;e&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[e]="4dfaf77c-9774-4c58-a435-4c6a95d8bbba",a._sentryDebugIdIdentifier="sentry-dbid-4dfaf77c-9774-4c58-a435-4c6a95d8bbba")}catch{}})();const I=async({params:a})=>{const e=a.id;e||y(404);const t=await w.getTree(e);return t.status!==200&&y(404),{id:e,tree:t.data}},Z=I?M(I):void 0,St=Object.freeze(Object.defineProperty({__proto__:null,load:Z},Symbol.toStringTag,{value:"Module"}));function tt(a,e){let t=Y(e,"value",12,"");V(a,{label:"Comment",multiline:!0,hint:"Some hints or suggested edits.",get value(){return t()},set value(d){t(d)},$$legacy:!0})}var et=_('<p>Would you like to add a comment?</p> <!> <div class="buttons svelte-1klurmp"><!></div>',1),at=_("<p>You need to be authenticated to add comments.</p> <!>",1);function ot(a,e){S(e,!0);const t=G(),d=()=>Q(R,"$isAuthenticated",t);let i=B("");const c=()=>{e.onSubmit(f(i))};var m=j(),u=g(m);{var l=r=>{var s=et(),o=n(g(s),2);tt(o,{get value(){return f(i)},set value(E){A(i,q(E))}});var h=n(o,2),k=T(h),D=O(()=>!f(i));X(k,{onClick:c,label:"Submit comment",get disabled(){return f(D)}}),$(h),v(r,s)},p=r=>{var s=at(),o=n(g(s),2);U(o,{}),v(r,s)};P(u,r=>{d()?r(l):r(p,!1)})}v(a,m),C()}var rt=_('<!> <!> <!> <!> <div class="container svelte-11j1l8y"><p>No comments for this tree yet.</p> <!></div>',1);function Ct(a,e){S(e,!0);const t=e.data.tree,d=s=>{w.addComment(t.id,s).then(o=>{o.status>=200&&o.status<300?(b.push("Comment added."),x(W.treeDetails(t.id))):(console.info(`Error ${o.status} adding a comment.`),b.push("Error adding comment."))}).catch(o=>{console.error("Exception while adding a comment.",o),b.push("Error adding comment.")})};var i=rt();N(s=>{H(()=>L.title=`${t.species??""} - Details`)});var c=g(i);z(c,{title:"Tree"});var m=n(c,2);F(m,{get title(){return t.species}});var u=n(m,2);J(u,{get tree(){return t.id},active:"comments"});var l=n(u,2);K(l,{get id(){return t.id}});var p=n(l,2),r=n(T(p),2);ot(r,{onSubmit:d}),$(p),v(a,i),C()}export{Ct as component,St as universal};
//# sourceMappingURL=8.DY7tK8qz.js.map
