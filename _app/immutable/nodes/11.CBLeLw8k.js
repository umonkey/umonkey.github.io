import{g as F}from"../chunks/entry.CFUNJgq2.js";import{a as D,b as k,w as H}from"../chunks/api.BasCzs_O.js";import{e as x}from"../chunks/index.XsXzBT2K.js";import"../chunks/disclose-version.DqngkMB6.js";import{T as j,N as p,U as A,O as i,P as I,ac as f,a9 as N,R as S,aF as P,ap as U,t as W,aE as z}from"../chunks/index.B87wyi30.js";import{h as L}from"../chunks/svelte-head.C6_1kwQK.js";import{c as B,a as u,t as w}from"../chunks/template.BfFjc-H-.js";import{s as R,i as M,a as Y}from"../chunks/store.BLO9MExh.js";import{e as q,i as G}from"../chunks/each.DvoN57-I.js";import{r as J}from"../chunks/routes.zEpojgHd.js";import"../chunks/legacy.lHikfPSh.js";import{t as T}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.DUlcVnVJ.js";import{H as K}from"../chunks/Header.2UU6XZ0B.js";import{T as Q,a as V,M as X}from"../chunks/Menu.CDYV47X9.js";import{p as Z,a as tt}from"../chunks/props.DQcQd9qT.js";import{i as et}from"../chunks/auth.C4J0teqx.js";import{S as at}from"../chunks/SignIn.454by8AK.js";import{T as ot,B as rt}from"../chunks/TextInput.C2a4GgkG.js";import{C as st}from"../chunks/Comment.DK1BBD-D.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a83f8d35-9bdb-4fc3-84d7-8bd7ca90fd3b",e._sentryDebugIdIdentifier="sentry-dbid-a83f8d35-9bdb-4fc3-84d7-8bd7ca90fd3b")}catch{}})();const nt=async e=>{const t=await D.getTree(e);return t.status!==200&&x(404),k(t.data.users),t.data},it=async e=>{const t=await D.getTreeComments(e);return t.status!==200&&x(404),k(t.data.users),t.data.comments},E=async({params:e})=>{const t=e.id;return{id:t,tree:await nt(t),comments:await it(t)}},dt=E?H(E):void 0,Ot=Object.freeze(Object.defineProperty({__proto__:null,load:dt},Symbol.toStringTag,{value:"Module"}));function mt(e,t){let a=Z(t,"value",12,"");ot(e,{label:"Comment",multiline:!0,hint:"Some hints or suggested edits.",get value(){return a()},set value(d){a(d)},$$legacy:!0})}var ct=w('<p>Would you like to add a comment?</p> <div class="form"><!> <div class="buttons"><!></div></div>',1),ut=w("<p>You need to be authenticated to add comments.</p> <!>",1);function lt(e,t){j(t,!0);const a=R(),d=()=>Y(et,"$isAuthenticated",a);let m=P("");const v=()=>{t.onSubmit(f(m))};var l=B(),g=p(l);{var b=s=>{var n=ct(),c=i(p(n),2),h=I(c);mt(h,{get value(){return f(m)},set value(C){N(m,tt(C))}});var y=i(h,2),r=I(y),o=U(()=>!f(m));rt(r,{onClick:v,label:"Submit comment",get disabled(){return f(o)}}),S(y),S(c),u(s,n)},_=s=>{var n=ut(),c=i(p(n),2);at(c,{}),u(s,n)};M(g,s=>{d()?s(b):s(_,!1)})}u(e,l),A()}var ft=w("<p>No comments for this tree yet.</p>"),pt=w('<!> <!> <!> <!> <div class="container svelte-11j1l8y"><!> <!></div>',1);function $t(e,t){j(t,!0);const a=t.data.tree,d=t.data.comments,m=r=>{D.addComment(a.id,r).then(o=>{o.status>=200&&o.status<300?(T.push("Comment added."),F(J.treeDetails(a.id))):(console.info(`Error ${o.status} adding a comment.`),T.push("Error adding comment."))}).catch(o=>{console.error("Exception while adding a comment.",o),T.push("Error adding comment.")})};var v=pt();L(r=>{W(()=>z.title=`${a.species??""} - Details`)});var l=p(v);K(l,{title:"Tree"});var g=i(l,2);Q(g,{get title(){return a.species}});var b=i(g,2);V(b,{get tree(){return a.id},active:"comments"});var _=i(b,2);X(_,{get id(){return a.id}});var s=i(_,2),n=I(s);{var c=r=>{var o=B(),C=p(o);q(C,17,()=>d,G,(O,$)=>{st(O,{get comment(){return f($)}})}),u(r,o)},h=r=>{var o=ft();u(r,o)};M(n,r=>{d.length>0?r(c):r(h,!1)})}var y=i(n,2);lt(y,{onSubmit:m}),S(s),u(e,v),A()}export{$t as component,Ot as universal};
