import"../chunks/entry.H2d7xo9k.js";import{w as oe,a as ie}from"../chunks/api.YGaO-OxF.js";import"../chunks/disclose-version.BuaYvhyZ.js";import{h as z,a as ne,i as le,b as ce,aN as fe,w as E,q as ve,aa as R,K as U,J as B,aj as J,ay as K,aO as W,n as S,c as Q,p as A,aP as de,d as ue,a0 as me,R as F,P as b,Q as p,T as G,N as T,ab as x,t as I,O as k,a3 as _e,a4 as te,a8 as V,aB as pe,aM as he}from"../chunks/index.CbWQdyPD.js";import{h as ge}from"../chunks/svelte-head.DlRxUE2U.js";import{a as _,t as D,c as Z,f as X}from"../chunks/template.FARQGre2.js";import{p as Y,a as ye}from"../chunks/props.ChXuGk-T.js";import{i as j,b as $,s as be,a as ee}from"../chunks/store.62LGNKp5.js";import{H as we}from"../chunks/Header.B2iSxPiH.js";import{M as Ce}from"../chunks/Map.ykKwI7zD.js";import{i as xe}from"../chunks/legacy.Cuu4uX5Q.js";import{s as q}from"../chunks/attributes.Bszi7fWb.js";import{e as Ie}from"../chunks/events.Dh_5afs_.js";import{C as ke}from"../chunks/CloseIcon.B5JIKR86.js";import{e as De,i as Me}from"../chunks/each.8C-LENRi.js";import{r as L}from"../chunks/routes.DJaOq88p.js";import{s as Te}from"../chunks/trees.C6AkHq0-.js";import{l as re}from"../chunks/auth.CeeiTyUs.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="86577046-a4c4-4f0c-99a6-442e83d64e3a",e._sentryDebugIdIdentifier="sentry-dbid-86577046-a4c4-4f0c-99a6-442e83d64e3a")}catch{}})();const H=0,M=1,O=2;function Ne(e,s,o,w,h){z&&ne();var n=e,d=le(),g=me,i=R,l,t,r,u=(d?U:B)(void 0),f=(d?U:B)(void 0),y=!1;function a(c,m){y=!0,m&&(J(v),K(v),W(g));try{c===H&&o&&(l?S(l):l=Q(()=>o(n))),c===M&&w&&(t?S(t):t=Q(()=>w(n,u))),c===O&&h&&(r?S(r):r=Q(()=>h(n,f))),c!==H&&l&&A(l,()=>l=null),c!==M&&t&&A(t,()=>t=null),c!==O&&r&&A(r,()=>r=null)}finally{m&&(W(null),K(null),J(null),de())}}var v=ce(()=>{if(i!==(i=s())){if(fe(i)){var c=i;y=!1,c.then(m=>{c===i&&(E(u,m),a(M,!0))},m=>{if(c===i)throw E(f,m),a(O,!0),f.v}),z||ve(()=>{y||a(H,!0)})}else E(u,i),a(M,!1);return()=>i=R}});z&&(n=ue)}const ae=({url:e})=>({searchQuery:e.searchParams.get("q")}),Pe=ae?oe(ae):void 0,oa=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var ze=D('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Ee=D('<div class="images svelte-5k02eh"></div>'),Se=D('<div class="gallery svelte-5k02eh"><!></div>');function Qe(e,s){F(s,!0);var o=Se(),w=b(o);Ne(w,()=>ie.getTree(s.tree.id),null,(h,n)=>{var d=Z(),g=T(d);{var i=t=>{var r=X("Failed to load photos.");_(t,r)},l=t=>{var r=Z(),u=T(r);{var f=a=>{var v=X("No images for this tree.");_(a,v)},y=a=>{var v=Ee();De(v,21,()=>x(n).data.files,Me,(c,m)=>{var C=ze(),P=b(C);I(()=>q(P,"href",L.treeDetails(s.tree.id)));var se=b(P);I(()=>q(se,"src",L.file(x(m).small_id))),p(P),p(C),_(c,C)}),p(v),_(a,v)};j(u,a=>{x(n).data.files.length==0?a(f):a(y,!1)},!0)}_(t,r)};j(g,t=>{x(n).status!=200?t(i):t(l,!1)})}_(h,d)}),p(o),_(e,o),G()}var Ae=D('<div class="preview svelte-mz5173"><div class="header svelte-mz5173"><div class="title svelte-mz5173"><a> </a></div> <button class="close svelte-mz5173"><!></button></div> <div class="props"> </div> <!></div>');function He(e,s){F(s,!1);let o=Y(s,"tree",8),w=Y(s,"onClose",8);xe();var h=Z(),n=T(h);{var d=g=>{var i=Ae(),l=b(i),t=b(l),r=b(t);I(()=>q(r,"href",L.treeDetails(o().id)));var u=b(r,!0);p(r),p(t);var f=k(t,2),y=b(f);ke(y,{}),p(f),p(l);var a=k(l,2),v=b(a,!0);I(()=>$(v,Te(o()))),p(a);var c=k(a,2);Qe(c,{get tree(){return o()}}),p(i),I(()=>$(u,o().species)),Ie("click",f,function(...m){var C;(C=w())==null||C.apply(this,m)}),_(g,i)};j(n,g=>{o()&&g(d)})}_(e,h),G()}const Oe=[40.181389,44.514444],N=_e(re.read("mapState")||{center:Oe,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const Ze=te(N,e=>e.center),je=te(N,e=>e.zoom);var qe=D("<!> <!> <!>",1);function ia(e,s){F(s,!0);const o=be(),w=()=>ee(Ze,"$mapCenter",o),h=()=>ee(je,"$mapZoom",o),n=s.data.searchQuery;let d=he(void 0);const g=n?`Map: ${n}`:"Map",i=a=>{V(d,ye(a))},l=()=>{V(d,void 0)},t=(a,v)=>{N.set({center:a,zoom:v})};var r=qe();ge(a=>{pe.title="Tree Map"});var u=T(r);we(u,{title:g});var f=k(u,2);Ce(f,{get center(){return w()},get zoom(){return h()},onChange:i,onMove:t,searchQuery:n});var y=k(f,2);He(y,{get tree(){return x(d)},onClose:l}),_(e,r),G()}export{ia as component,oa as universal};
