import{g as X}from"../chunks/entry.D7ASf8CO.js";import{a as J,w as Z}from"../chunks/api.DY71tP62.js";import{e as F}from"../chunks/index.Kmb7ft4_.js";import"../chunks/disclose-version.D5qFeJen.js";import{j as $,aF as i,f as O,k as ee,aE as te,s as o,a4 as t,ab as d,e as P,g as W}from"../chunks/index.6fWcJMZL.js";import{h as ae}from"../chunks/svelte-head.BfVEVBH-.js";import{a as Y,t as K}from"../chunks/template.Cy3dU-Fh.js";import{a}from"../chunks/props.CXIUh43G.js";import{r as re}from"../chunks/routes.I2ckTi72.js";import"../chunks/legacy.D-anx2rK.js";import{t as M}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.kVwYKxLT.js";import{A as ne}from"../chunks/AuthWrapper.Doyo_-tm.js";import{B as q}from"../chunks/TextInput.9wGlgXMb.js";import{S as oe,H as se,C as ie,a as de,b as ue,Y as le,L as ce,N as ve}from"../chunks/YearInput.HSnrxeDt.js";import{H as me}from"../chunks/Header.R2SL_DEk.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new s.Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="b042c0b6-8bd8-4f23-839d-dc4d2eb38482",s._sentryDebugIdIdentifier="sentry-dbid-b042c0b6-8bd8-4f23-839d-dc4d2eb38482")}catch{}})();const G=async({params:s})=>{const e=s.id;e||F(404);const u=await J.getTree(e);return u.status!==200&&F(404),{id:e,tree:u.data}},fe=G?Z(G):void 0,Le=Object.freeze(Object.defineProperty({__proto__:null,load:fe},Symbol.toStringTag,{value:"Module"}));var pe=K('<!> <!> <!> <!> <!> <!> <!> <!> <div class="buttons"><!> <!></div>',1),ge=K('<!> <div class="form svelte-1jizvdx"><!></div>',1);function Te(s,e){var w,C,E;$(e,!0);const u=e.data.id;let v=i(a(e.data.tree.species??"")),m=i(a(((w=e.data.tree.height)==null?void 0:w.toString())??"0")),f=i(a(((C=e.data.tree.diameter)==null?void 0:C.toString())??"0")),p=i(a(((E=e.data.tree.circumference)==null?void 0:E.toString())??"0")),g=i(a(e.data.tree.state??"")),b=i(a(e.data.tree.notes??"")),l=i(a([e.data.tree.lat,e.data.tree.lon])),_=i(a(e.data.tree.year??""));const c=n=>{if(n===""||n==="0")return null;const h=parseFloat(n);return isNaN(h)?null:h},Q=()=>{J.updateTree(u,{species:t(v),height:c(t(m)),diameter:c(t(f)),circumference:c(t(p)),state:t(g),notes:t(b),lat:t(l)[0],lon:t(l)[1],year:c(t(_))}).then(n=>{n.status>=200&&n.status<400?X(re.treeDetails(u)):(console.error(`Error ${n.status} updating tree.`),M.push("Error updating tree."))}).catch(n=>{console.error(`Error updating tree: ${n}.`),M.push("Error updating tree.")})},R=()=>{history.back()};var y=ge();ae(n=>{te.title="Edit tree"});var I=O(y);me(I,{title:"Edit tree"});var S=o(I,2),U=P(S);ne(U,{children:(n,h)=>{var k=pe(),D=O(k);oe(D,{get value(){return t(v)},set value(r){d(v,a(r))}});var j=o(D,2);se(j,{get value(){return t(m)},set value(r){d(m,a(r))}});var H=o(j,2);ie(H,{get value(){return t(f)},set value(r){d(f,a(r))}});var N=o(H,2);de(N,{get value(){return t(p)},set value(r){d(p,a(r))}});var x=o(N,2);ue(x,{get value(){return t(g)},set value(r){d(g,a(r))}});var L=o(x,2);le(L,{get value(){return t(_)},set value(r){d(_,a(r))}});var T=o(L,2);ce(T,{get value(){return t(l)},set value(r){d(l,a(r))}});var z=o(T,2);ve(z,{get value(){return t(b)},set value(r){d(b,a(r))}});var A=o(z,2),B=P(A);q(B,{type:"submit",label:"Save changes",onClick:Q});var V=o(B,2);q(V,{type:"cancel",label:"Cancel",onClick:R}),W(A),Y(n,k)},$$slots:{default:!0}}),W(S),Y(s,y),ee()}export{Te as component,Le as universal};
