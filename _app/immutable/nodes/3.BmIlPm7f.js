import{a as c,n as se,t as D,c as U,f as B}from"../chunks/disclose-version.LDNd2v4z.js";import{h as T,a as oe,aE as ie,b as ne,aJ as le,n as A,q as ve,U as O,D as R,C as $,ah as j,av as Q,aK as V,k as P,c as H,p as L,aL as fe,d as ce,$ as de,N as J,L as w,M as u,O as K,J as M,a9 as C,t as I,K as k,a7 as W,ay as me,aI as ue}from"../chunks/utils._tGpIG1X.js";import{h as pe}from"../chunks/svelte-head.DogzZgVE.js";import{p as X,a as _e}from"../chunks/props.D-IbAtZQ.js";import{b as Y,s as he,a as ee}from"../chunks/store.omKNaQyP.js";import{H as ge}from"../chunks/Header.GX4g2Pc9.js";import{M as be}from"../chunks/Map.C63VitnM.js";import{i as we}from"../chunks/legacy.BLYxeSQ6.js";import{i as q}from"../chunks/if.BWgjNr8K.js";import{s as F}from"../chunks/attributes.DtKWgCnl.js";import{e as ye}from"../chunks/events.G-PuaD72.js";import{e as xe,i as Ce}from"../chunks/each.jP8g-m14.js";import{r as G}from"../chunks/routes.58xAMFEx.js";import{a as Ie}from"../chunks/api.CA0ICc-P.js";import{s as ke}from"../chunks/trees.Dq5sDTmb.js";import{w as De,d as te}from"../chunks/index.C3pZAK_X.js";import{l as ae}from"../chunks/auth.DV8npm1A.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="bfe76417-be63-408c-b826-774253b12a56",e._sentryDebugIdIdentifier="sentry-dbid-bfe76417-be63-408c-b826-774253b12a56")}catch{}})();const S=0,z=1,Z=2;function ze(e,r,s,y,p){T&&oe();var l=e,_=ie(),h=de,o=O,i,t,a,g=(_?R:$)(void 0),v=(_?R:$)(void 0),b=!1;function n(f,m){b=!0,m&&(j(d),Q(d),V(h));try{f===S&&s&&(i?P(i):i=H(()=>s(l))),f===z&&y&&(t?P(t):t=H(()=>y(l,g))),f===Z&&p&&(a?P(a):a=H(()=>p(l,v))),f!==S&&i&&L(i,()=>i=null),f!==z&&t&&L(t,()=>t=null),f!==Z&&a&&L(a,()=>a=null)}finally{m&&(V(null),Q(null),j(null),fe())}}var d=ne(()=>{if(o!==(o=r())){if(le(o)){var f=o;b=!1,f.then(m=>{f===o&&(A(g,m),n(z,!0))},m=>{if(f===o)throw A(v,m),n(Z,!0),v.v}),T||ve(()=>{b||n(S,!0)})}else A(g,o),n(z,!1);return()=>o=O}});T&&(l=ce)}var Me=se('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>');function Ee(e){var r=Me();c(e,r)}var Ne=D('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Te=D('<div class="images svelte-5k02eh"></div>'),Ae=D('<div class="gallery svelte-5k02eh"><!></div>');function Pe(e,r){J(r,!0);var s=Ae(),y=w(s);ze(y,()=>Ie.getTree(r.tree.id),null,(p,l)=>{var _=U(),h=M(_);{var o=t=>{var a=B("Failed to load photos.");c(t,a)},i=t=>{var a=U(),g=M(a);{var v=n=>{var d=B("No images for this tree.");c(n,d)},b=n=>{var d=Te();xe(d,21,()=>C(l).data.files,Ce,(f,m)=>{var x=Ne(),N=w(x);I(()=>F(N,"href",G.treeDetails(r.tree.id)));var re=w(N);I(()=>F(re,"src",G.file(C(m).small_id))),u(N),u(x),c(f,x)}),u(d),c(n,d)};q(g,n=>{C(l).data.files.length==0?n(v):n(b,!1)},!0)}c(t,a)};q(h,t=>{C(l).status!=200?t(o):t(i,!1)})}c(p,_)}),u(s),c(e,s),K()}var He=D('<div class="preview svelte-mz5173"><div class="header svelte-mz5173"><div class="title svelte-mz5173"><a> </a></div> <button class="close svelte-mz5173"><!></button></div> <div class="props"> </div> <!></div>');function Le(e,r){J(r,!1);let s=X(r,"tree",8),y=X(r,"onClose",8);we();var p=U(),l=M(p);{var _=h=>{var o=He(),i=w(o),t=w(i),a=w(t);I(()=>F(a,"href",G.treeDetails(s().id)));var g=w(a,!0);u(a),u(t);var v=k(t,2),b=w(v);Ee(b),u(v),u(i);var n=k(i,2),d=w(n,!0);I(()=>Y(d,ke(s()))),u(n);var f=k(n,2);Pe(f,{get tree(){return s()}}),u(o),I(()=>Y(g,s().species)),ye("click",v,function(...m){var x;(x=y())==null||x.apply(this,m)}),c(h,o)};q(l,h=>{s()&&h(_)})}c(e,p),K()}const Se=[40.181389,44.514444],E=De(ae.read("mapState")||{center:Se,zoom:15});E.subscribe(e=>{ae.write("mapState",e)});const Ze=te(E,e=>e.center),Ue=te(E,e=>e.zoom);var qe=D("<!> <!> <!>",1);function rt(e,r){J(r,!0);const s=he(),y=()=>ee(Ze,"$mapCenter",s),p=()=>ee(Ue,"$mapZoom",s);let l=ue(void 0);const _=v=>{W(l,_e(v))},h=()=>{W(l,void 0)},o=(v,b)=>{E.set({center:v,zoom:b})};var i=qe();pe(v=>{me.title="Map"});var t=M(i);ge(t,{title:"Tree"});var a=k(t,2);be(a,{get center(){return y()},get zoom(){return p()},onChange:_,onMove:o});var g=k(a,2);Le(g,{get tree(){return C(l)},onClose:h}),c(e,i),K()}export{rt as component};
//# sourceMappingURL=3.BmIlPm7f.js.map
