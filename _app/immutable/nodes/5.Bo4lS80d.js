import"../chunks/entry.cYK0612i.js";import{w as oe,a as ie}from"../chunks/api.4idkvigI.js";import"../chunks/disclose-version.Byi7WsKc.js";import{h as E,a as ne,i as le,b as ce,aL as fe,L as P,q as de,ac as U,W,V as R,ak as V,aH as B,aM as J,G as A,c as H,p as L,aN as ve,d as ue,a2 as me,e as F,j as g,k as u,f as O,g as T,a5 as x,t as k,s as D,a1 as pe,ax as _e,aa as K}from"../chunks/utils.Dgi77uK7.js";import{i as j,b as X,s as he,h as ge,a as Y}from"../chunks/store.DHnJd8LM.js";import{a as h,t as I,c as q,d as $,e as be}from"../chunks/template.Ceu2VJXf.js";import{p as ee,a as ye}from"../chunks/props.9DliRprJ.js";import{H as we}from"../chunks/Header.J3ek82Pr.js";import{M as Ce}from"../chunks/Map.CfVuZLWY.js";import{i as xe}from"../chunks/legacy.DLDXDAWA.js";import{s as G}from"../chunks/attributes.BCT-7XZo.js";import{C as ke}from"../chunks/CloseIcon.7LRQoksI.js";import{e as De,i as Ie}from"../chunks/each.Cqq6vaTl.js";import{r as Q}from"../chunks/routes.BArzBvUm.js";import{f as Me,s as Te}from"../chunks/trees.B9GcUxTy.js";import{w as Ne,d as te}from"../chunks/index.CdQUIivi.js";import{D as Se}from"../chunks/constants.Dpw9bHiL.js";import{l as re}from"../chunks/auth.BS07JJKx.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="b5d99c0e-fe78-4d71-91d9-18f70700a994",e._sentryDebugIdIdentifier="sentry-dbid-b5d99c0e-fe78-4d71-91d9-18f70700a994")}catch{}})();const z=0,M=1,Z=2;function Ee(e,r,o,w,b){E&&ne();var c=e,v=le(),y=me,i=U,f,a,t,m=(v?W:R)(void 0),d=(v?W:R)(void 0),p=!1;function s(n,_){p=!0,_&&(V(l),B(l),J(y));try{n===z&&o&&(f?A(f):f=H(()=>o(c))),n===M&&w&&(a?A(a):a=H(()=>w(c,m))),n===Z&&b&&(t?A(t):t=H(()=>b(c,d))),n!==z&&f&&L(f,()=>f=null),n!==M&&a&&L(a,()=>a=null),n!==Z&&t&&L(t,()=>t=null)}finally{_&&(J(null),B(null),V(null),ve())}}var l=ce(()=>{if(i!==(i=r())){if(fe(i)){var n=i;p=!1,n.then(_=>{n===i&&(P(m,_),s(M,!0))},_=>{if(n===i)throw P(d,_),s(Z,!0),d.v}),E||de(()=>{p||s(z,!0)})}else P(m,i),s(M,!1);return()=>i=U}});E&&(c=ue)}const ae=({url:e})=>{const r=e.searchParams.get("q");return console.debug(window.location.hash),{searchQuery:r}},Pe=ae?oe(ae):void 0,ia=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var Ae=I('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),He=I('<div class="images svelte-5k02eh"></div>'),Le=I('<div class="gallery svelte-5k02eh"><!></div>');function ze(e,r){F(r,!0);var o=Le(),w=g(o);Ee(w,()=>ie.getTree(r.tree.id),null,(b,c)=>{var v=q(),y=T(v);{var i=a=>{var t=$("Failed to load photos.");h(a,t)},f=a=>{var t=q(),m=T(t);{var d=s=>{var l=$("No images for this tree.");h(s,l)},p=s=>{var l=He();De(l,21,()=>x(c).data.files,Ie,(n,_)=>{var C=Ae(),S=g(C);k(()=>G(S,"href",Q.treeDetails(r.tree.id)));var se=g(S);k(()=>G(se,"src",Q.file(x(_).small_id))),u(S),u(C),h(n,C)}),u(l),h(s,l)};j(m,s=>{x(c).data.files.length==0?s(d):s(p,!1)},!0)}h(a,t)};j(y,a=>{x(c).status!=200?a(i):a(f,!1)})}h(b,v)}),u(o),h(e,o),O()}var Ze=I('<div class="preview svelte-1hfbc1n"><div class="header svelte-1hfbc1n"><div class="title svelte-1hfbc1n"><a> </a></div> <button class="close svelte-1hfbc1n"><!></button></div> <div class="props"> </div> <!></div>');function je(e,r){F(r,!1);let o=ee(r,"tree",8),w=ee(r,"onClose",8);xe();var b=q(),c=T(b);{var v=y=>{var i=Ze(),f=g(i),a=g(f),t=g(a);k(()=>G(t,"href",Q.treeDetails(o().id)));var m=g(t,!0);k(()=>X(m,Me(o().species))),u(t),u(a);var d=D(a,2),p=g(d);ke(p,{}),u(d),u(f);var s=D(f,2),l=g(s,!0);k(()=>X(l,Te(o()))),u(s);var n=D(s,2);ze(n,{get tree(){return o()}}),u(i),be("click",d,function(..._){var C;(C=w())==null||C.apply(this,_)}),h(y,i)};j(c,y=>{o()&&y(v)})}h(e,b),O()}const N=Ne(re.read("mapState")||{center:Se,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const qe=te(N,e=>e.center),Ge=te(N,e=>e.zoom);var Qe=I('<!> <div class="mapContainer svelte-11p9u5n"><!> <!></div>',1);function na(e,r){F(r,!0);const o=he(),w=()=>Y(qe,"$mapCenter",o),b=()=>Y(Ge,"$mapZoom",o),c=r.data.searchQuery;let v=_e(void 0);const y=c?`Map: ${c}`:"Map",i=l=>{K(v,ye(l))},f=()=>{K(v,void 0)},a=(l,n)=>{N.set({center:l,zoom:n})};var t=Qe();ge(l=>{pe.title="Tree Map"});var m=T(t);we(m,{title:y});var d=D(m,2),p=g(d);Ce(p,{get center(){return w()},get zoom(){return b()},onChange:i,onMove:a,searchQuery:c,canAdd:!0});var s=D(p,2);je(s,{get tree(){return x(v)},onClose:f}),u(d),h(e,t),O()}export{na as component,ia as universal};
