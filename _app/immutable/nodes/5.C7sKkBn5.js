import"../chunks/entry.71SQ_wY7.js";import{w as oe,a as ie}from"../chunks/api.DhTczN_B.js";import"../chunks/disclose-version.D-uV0LY6.js";import{h as P,a as ne,i as le,b as fe,aN as ce,G as S,q as de,ad as R,T as U,R as W,al as B,az as J,aO as K,C as z,c as A,p as H,aP as ve,d as ue,a0 as me,j as L,e as g,g as u,k as O,f as M,a4 as x,t as k,s as D,a6 as pe,a7 as te,aE as _e,aF as he,ab as V}from"../chunks/index.6fWcJMZL.js";import{h as ge}from"../chunks/svelte-head.BfVEVBH-.js";import{a as h,t as I,c as j,d as X}from"../chunks/template.Cy3dU-Fh.js";import{p as Y,a as be}from"../chunks/props.DTdg-JZO.js";import{i as q,b as $,s as ye,a as ee}from"../chunks/store.Ca5y9fR9.js";import{H as we}from"../chunks/Header.6ziqmDYw.js";import{M as Ce}from"../chunks/Map.DKbthoqT.js";import{i as xe}from"../chunks/legacy.D-anx2rK.js";import{s as F}from"../chunks/attributes._hmteFvG.js";import{e as ke}from"../chunks/events.MNT5-Jkf.js";import{C as De}from"../chunks/CloseIcon.BqHLhjx_.js";import{e as Ie,i as Te}from"../chunks/each.DbABizDz.js";import{r as G}from"../chunks/routes.eRpkUzYb.js";import{f as Me,s as Ee}from"../chunks/trees.mV2nf4s_.js";import{D as Ne}from"../chunks/constants.CsvTx3xx.js";import{l as re}from"../chunks/auth.az8VCGXi.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="ddae2958-6bd9-49e5-a389-1c2659d27f08",e._sentryDebugIdIdentifier="sentry-dbid-ddae2958-6bd9-49e5-a389-1c2659d27f08")}catch{}})();const Q=0,T=1,Z=2;function Pe(e,s,o,w,b){P&&ne();var f=e,v=le(),y=me,i=R,c,a,t,m=(v?U:W)(void 0),d=(v?U:W)(void 0),p=!1;function r(n,_){p=!0,_&&(B(l),J(l),K(y));try{n===Q&&o&&(c?z(c):c=A(()=>o(f))),n===T&&w&&(a?z(a):a=A(()=>w(f,m))),n===Z&&b&&(t?z(t):t=A(()=>b(f,d))),n!==Q&&c&&H(c,()=>c=null),n!==T&&a&&H(a,()=>a=null),n!==Z&&t&&H(t,()=>t=null)}finally{_&&(K(null),J(null),B(null),ve())}}var l=fe(()=>{if(i!==(i=s())){if(ce(i)){var n=i;p=!1,n.then(_=>{n===i&&(S(m,_),r(T,!0))},_=>{if(n===i)throw S(d,_),r(Z,!0),d.v}),P||de(()=>{p||r(Q,!0)})}else S(m,i),r(T,!1);return()=>i=R}});P&&(f=ue)}const ae=({url:e})=>({searchQuery:e.searchParams.get("q")}),Se=ae?oe(ae):void 0,na=Object.freeze(Object.defineProperty({__proto__:null,load:Se},Symbol.toStringTag,{value:"Module"}));var ze=I('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Ae=I('<div class="images svelte-5k02eh"></div>'),He=I('<div class="gallery svelte-5k02eh"><!></div>');function Qe(e,s){L(s,!0);var o=He(),w=g(o);Pe(w,()=>ie.getTree(s.tree.id),null,(b,f)=>{var v=j(),y=M(v);{var i=a=>{var t=X("Failed to load photos.");h(a,t)},c=a=>{var t=j(),m=M(t);{var d=r=>{var l=X("No images for this tree.");h(r,l)},p=r=>{var l=Ae();Ie(l,21,()=>x(f).data.files,Te,(n,_)=>{var C=ze(),N=g(C);k(()=>F(N,"href",G.treeDetails(s.tree.id)));var se=g(N);k(()=>F(se,"src",G.file(x(_).small_id))),u(N),u(C),h(n,C)}),u(l),h(r,l)};q(m,r=>{x(f).data.files.length==0?r(d):r(p,!1)},!0)}h(a,t)};q(y,a=>{x(f).status!=200?a(i):a(c,!1)})}h(b,v)}),u(o),h(e,o),O()}var Ze=I('<div class="preview svelte-1hfbc1n"><div class="header svelte-1hfbc1n"><div class="title svelte-1hfbc1n"><a> </a></div> <button class="close svelte-1hfbc1n"><!></button></div> <div class="props"> </div> <!></div>');function je(e,s){L(s,!1);let o=Y(s,"tree",8),w=Y(s,"onClose",8);xe();var b=j(),f=M(b);{var v=y=>{var i=Ze(),c=g(i),a=g(c),t=g(a);k(()=>F(t,"href",G.treeDetails(o().id)));var m=g(t,!0);k(()=>$(m,Me(o().species))),u(t),u(a);var d=D(a,2),p=g(d);De(p,{}),u(d),u(c);var r=D(c,2),l=g(r,!0);k(()=>$(l,Ee(o()))),u(r);var n=D(r,2);Qe(n,{get tree(){return o()}}),u(i),ke("click",d,function(..._){var C;(C=w())==null||C.apply(this,_)}),h(y,i)};q(f,y=>{o()&&y(v)})}h(e,b),O()}const E=pe(re.read("mapState")||{center:Ne,zoom:15});E.subscribe(e=>{re.write("mapState",e)});const qe=te(E,e=>e.center),Fe=te(E,e=>e.zoom);var Ge=I('<!> <div class="mapContainer svelte-11p9u5n"><!> <!></div>',1);function la(e,s){L(s,!0);const o=ye(),w=()=>ee(qe,"$mapCenter",o),b=()=>ee(Fe,"$mapZoom",o),f=s.data.searchQuery;let v=he(void 0);const y=f?`Map: ${f}`:"Map",i=l=>{V(v,be(l))},c=()=>{V(v,void 0)},a=(l,n)=>{E.set({center:l,zoom:n})};var t=Ge();ge(l=>{_e.title="Tree Map"});var m=M(t);we(m,{title:y});var d=D(m,2),p=g(d);Ce(p,{get center(){return w()},get zoom(){return b()},onChange:i,onMove:a,searchQuery:f,canAdd:!0});var r=D(p,2);je(r,{get tree(){return x(v)},onClose:c}),u(d),h(e,t),O()}export{la as component,na as universal};
