import"../chunks/entry.B-tNRBZX.js";import{w as oe,a as ie}from"../chunks/api.PgFL0iuN.js";import"../chunks/disclose-version.DdIrUV2l.js";import{h as E,a as ne,j as le,b as fe,aL as ce,L as P,q as de,ac as U,W,V as R,ak as V,aH as $,aM as B,G as A,c as H,p as L,aN as ve,d as ue,a2 as me,e as F,i as b,r as u,g as O,f as T,a5 as x,t as k,s as D,$ as pe,ax as _e,aa as J}from"../chunks/utils.DMKbH_fB.js";import{i as j,b as K,s as he,h as be,a as X}from"../chunks/store.DleGquTK.js";import{a as h,t as I,c as q,d as Y,e as ge}from"../chunks/template.CN6ZiA3q.js";import{p as ee,a as ye}from"../chunks/props.BCeuO9OM.js";import{H as we}from"../chunks/Header.3TZJ_ZB4.js";import{M as Ce}from"../chunks/Map.C3IVkDVJ.js";import{i as xe}from"../chunks/legacy.BCmHD9Hn.js";import{s as G}from"../chunks/attributes.Hxoo6JFj.js";import{C as ke}from"../chunks/CloseIcon.DBK8iGwI.js";import{e as De,i as Ie}from"../chunks/each.Ou8TFu4Q.js";import{r as Q}from"../chunks/routes.63aqscX6.js";import{f as Me,s as Te}from"../chunks/trees.DakY2mmv.js";import{w as Ne,d as te}from"../chunks/index.bg6hl2lT.js";import{D as Se}from"../chunks/constants.B2EOAzCq.js";import{l as re}from"../chunks/auth.BQhlJmSG.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="de3d859f-e1f1-4534-be44-92d38aebf3b0",e._sentryDebugIdIdentifier="sentry-dbid-de3d859f-e1f1-4534-be44-92d38aebf3b0")}catch{}})();const z=0,M=1,Z=2;function Ee(e,r,o,w,g){E&&ne();var f=e,v=le(),y=me,i=U,c,a,t,m=(v?W:R)(void 0),d=(v?W:R)(void 0),p=!1;function s(n,_){p=!0,_&&(V(l),$(l),B(y));try{n===z&&o&&(c?A(c):c=H(()=>o(f))),n===M&&w&&(a?A(a):a=H(()=>w(f,m))),n===Z&&g&&(t?A(t):t=H(()=>g(f,d))),n!==z&&c&&L(c,()=>c=null),n!==M&&a&&L(a,()=>a=null),n!==Z&&t&&L(t,()=>t=null)}finally{_&&(B(null),$(null),V(null),ve())}}var l=fe(()=>{if(i!==(i=r())){if(ce(i)){var n=i;p=!1,n.then(_=>{n===i&&(P(m,_),s(M,!0))},_=>{if(n===i)throw P(d,_),s(Z,!0),d.v}),E||de(()=>{p||s(z,!0)})}else P(m,i),s(M,!1);return()=>i=U}});E&&(f=ue)}const ae=({url:e})=>{const r=e.searchParams.get("q");return console.debug(window.location.hash),{searchQuery:r}},Pe=ae?oe(ae):void 0,ia=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var Ae=I('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),He=I('<div class="images svelte-5k02eh"></div>'),Le=I('<div class="gallery svelte-5k02eh"><!></div>');function ze(e,r){F(r,!0);var o=Le(),w=b(o);Ee(w,()=>ie.getTree(r.tree.id),null,(g,f)=>{var v=q(),y=T(v);{var i=a=>{var t=Y("Failed to load photos.");h(a,t)},c=a=>{var t=q(),m=T(t);{var d=s=>{var l=Y("No images for this tree.");h(s,l)},p=s=>{var l=He();De(l,21,()=>x(f).data.files,Ie,(n,_)=>{var C=Ae(),S=b(C);k(()=>G(S,"href",Q.treeDetails(r.tree.id)));var se=b(S);k(()=>G(se,"src",Q.file(x(_).small_id))),u(S),u(C),h(n,C)}),u(l),h(s,l)};j(m,s=>{x(f).data.files.length==0?s(d):s(p,!1)},!0)}h(a,t)};j(y,a=>{x(f).status!=200?a(i):a(c,!1)})}h(g,v)}),u(o),h(e,o),O()}var Ze=I('<div class="preview svelte-1hfbc1n"><div class="header svelte-1hfbc1n"><div class="title svelte-1hfbc1n"><a> </a></div> <button class="close svelte-1hfbc1n"><!></button></div> <div class="props"> </div> <!></div>');function je(e,r){F(r,!1);let o=ee(r,"tree",8),w=ee(r,"onClose",8);xe();var g=q(),f=T(g);{var v=y=>{var i=Ze(),c=b(i),a=b(c),t=b(a);k(()=>G(t,"href",Q.treeDetails(o().id)));var m=b(t,!0);k(()=>K(m,Me(o().species))),u(t),u(a);var d=D(a,2),p=b(d);ke(p,{}),u(d),u(c);var s=D(c,2),l=b(s,!0);k(()=>K(l,Te(o()))),u(s);var n=D(s,2);ze(n,{get tree(){return o()}}),u(i),ge("click",d,function(..._){var C;(C=w())==null||C.apply(this,_)}),h(y,i)};j(f,y=>{o()&&y(v)})}h(e,g),O()}const N=Ne(re.read("mapState")||{center:Se,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const qe=te(N,e=>e.center),Ge=te(N,e=>e.zoom);var Qe=I('<!> <div class="mapContainer svelte-11p9u5n"><!> <!></div>',1);function na(e,r){F(r,!0);const o=he(),w=()=>X(qe,"$mapCenter",o),g=()=>X(Ge,"$mapZoom",o),f=r.data.searchQuery;let v=_e(void 0);const y=f?`Map: ${f}`:"Map",i=l=>{J(v,ye(l))},c=()=>{J(v,void 0)},a=(l,n)=>{N.set({center:l,zoom:n})};var t=Qe();be(l=>{pe.title="Tree Map"});var m=T(t);we(m,{title:y});var d=D(m,2),p=b(d);Ce(p,{get center(){return w()},get zoom(){return g()},onChange:i,onMove:a,searchQuery:f,canAdd:!0});var s=D(p,2);je(s,{get tree(){return x(v)},onClose:c}),u(d),h(e,t),O()}export{na as component,ia as universal};
