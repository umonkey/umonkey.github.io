import"../chunks/entry.DtrRR8tL.js";import{w as n}from"../chunks/load.DiFz2wEx.js";import{a as s}from"../chunks/api.D8c_OKvc.js";import{a as d}from"../chunks/auth.CChyksl4.js";import"../chunks/disclose-version.BGLjfrjY.js";import{Q as c,R as i}from"../chunks/index.Biod19yG.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="39559b03-00ec-4cfb-893d-d6c8b3f11b99",e._sentryDebugIdIdentifier="sentry-dbid-39559b03-00ec-4cfb-893d-d6c8b3f11b99")}catch{}})();const r=async({url:e})=>{const t=e.searchParams.get("token"),o=e.searchParams.get("state");console.debug(`[auth] token=${t}`),console.debug(`[auth] state=${o}`);const a=await s.getMe(t);return a.status!==200&&(console.error("[auth] Error fetching user data"),error(401)),console.info(`[auth] Logged in as ${a.data.name}`),d.set({token:t,name:a.data.name,picture:a.data.picture}),{redirect:o}},u=r?n(r):void 0,h=Object.freeze(Object.defineProperty({__proto__:null,load:u},Symbol.toStringTag,{value:"Module"}));function y(e,t){c(t,!0),window.location.href=t.data.redirect,i()}export{y as component,h as universal};
//# sourceMappingURL=3.BuPDFmkG.js.map
