import"../chunks/entry.CFUNJgq2.js";import{w as oe,a as ie}from"../chunks/api.BasCzs_O.js";import"../chunks/disclose-version.DqngkMB6.js";import{h as E,a as ne,i as fe,b as le,aN as ce,w as S,q as ve,ab as G,K as R,J,ak as K,az as W,aO as B,n as z,c as A,p as H,aP as de,d as ue,a1 as me,T as U,P as b,R as u,U as j,N as M,ac as x,t as k,O as D,a4 as pe,a5 as te,aE as _e,aF as he,a9 as V}from"../chunks/index.B87wyi30.js";import{h as be}from"../chunks/svelte-head.C6_1kwQK.js";import{a as h,t as I,c as Z,d as X}from"../chunks/template.BfFjc-H-.js";import{p as Y,a as ge}from"../chunks/props.DQcQd9qT.js";import{i as q,b as $,s as ye,a as ee}from"../chunks/store.BLO9MExh.js";import{H as we}from"../chunks/Header.2UU6XZ0B.js";import{M as Ce}from"../chunks/Map.B2ueThw2.js";import{i as xe}from"../chunks/legacy.lHikfPSh.js";import{s as F}from"../chunks/attributes.H0NIr2B_.js";import{e as ke}from"../chunks/events.m1EfLtx7.js";import{C as De}from"../chunks/CloseIcon.DvKWKz8U.js";import{e as Ie,i as Te}from"../chunks/each.DvoN57-I.js";import{r as L}from"../chunks/routes.zEpojgHd.js";import{f as Me,s as Ne}from"../chunks/trees.B8AGFtcr.js";import{D as Pe}from"../chunks/constants.Dy3xyMIV.js";import{l as re}from"../chunks/auth.C4J0teqx.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="dfaaff62-2aca-4b7b-aa8e-55238f6f1a81",e._sentryDebugIdIdentifier="sentry-dbid-dfaaff62-2aca-4b7b-aa8e-55238f6f1a81")}catch{}})();const O=0,T=1,Q=2;function Ee(e,s,o,w,g){E&&ne();var l=e,d=fe(),y=me,i=G,c,a,t,m=(d?R:J)(void 0),v=(d?R:J)(void 0),p=!1;function r(n,_){p=!0,_&&(K(f),W(f),B(y));try{n===O&&o&&(c?z(c):c=A(()=>o(l))),n===T&&w&&(a?z(a):a=A(()=>w(l,m))),n===Q&&g&&(t?z(t):t=A(()=>g(l,v))),n!==O&&c&&H(c,()=>c=null),n!==T&&a&&H(a,()=>a=null),n!==Q&&t&&H(t,()=>t=null)}finally{_&&(B(null),W(null),K(null),de())}}var f=le(()=>{if(i!==(i=s())){if(ce(i)){var n=i;p=!1,n.then(_=>{n===i&&(S(m,_),r(T,!0))},_=>{if(n===i)throw S(v,_),r(Q,!0),v.v}),E||ve(()=>{p||r(O,!0)})}else S(m,i),r(T,!1);return()=>i=G}});E&&(l=ue)}const ae=({url:e})=>({searchQuery:e.searchParams.get("q")}),Se=ae?oe(ae):void 0,na=Object.freeze(Object.defineProperty({__proto__:null,load:Se},Symbol.toStringTag,{value:"Module"}));var ze=I('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Ae=I('<div class="images svelte-5k02eh"></div>'),He=I('<div class="gallery svelte-5k02eh"><!></div>');function Oe(e,s){U(s,!0);var o=He(),w=b(o);Ee(w,()=>ie.getTree(s.tree.id),null,(g,l)=>{var d=Z(),y=M(d);{var i=a=>{var t=X("Failed to load photos.");h(a,t)},c=a=>{var t=Z(),m=M(t);{var v=r=>{var f=X("No images for this tree.");h(r,f)},p=r=>{var f=Ae();Ie(f,21,()=>x(l).data.files,Te,(n,_)=>{var C=ze(),P=b(C);k(()=>F(P,"href",L.treeDetails(s.tree.id)));var se=b(P);k(()=>F(se,"src",L.file(x(_).small_id))),u(P),u(C),h(n,C)}),u(f),h(r,f)};q(m,r=>{x(l).data.files.length==0?r(v):r(p,!1)},!0)}h(a,t)};q(y,a=>{x(l).status!=200?a(i):a(c,!1)})}h(g,d)}),u(o),h(e,o),j()}var Qe=I('<div class="preview svelte-1hfbc1n"><div class="header svelte-1hfbc1n"><div class="title svelte-1hfbc1n"><a> </a></div> <button class="close svelte-1hfbc1n"><!></button></div> <div class="props"> </div> <!></div>');function Ze(e,s){U(s,!1);let o=Y(s,"tree",8),w=Y(s,"onClose",8);xe();var g=Z(),l=M(g);{var d=y=>{var i=Qe(),c=b(i),a=b(c),t=b(a);k(()=>F(t,"href",L.treeDetails(o().id)));var m=b(t,!0);k(()=>$(m,Me(o().species))),u(t),u(a);var v=D(a,2),p=b(v);De(p,{}),u(v),u(c);var r=D(c,2),f=b(r,!0);k(()=>$(f,Ne(o()))),u(r);var n=D(r,2);Oe(n,{get tree(){return o()}}),u(i),ke("click",v,function(..._){var C;(C=w())==null||C.apply(this,_)}),h(y,i)};q(l,y=>{o()&&y(d)})}h(e,g),j()}const N=pe(re.read("mapState")||{center:Pe,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const qe=te(N,e=>e.center),Fe=te(N,e=>e.zoom);var Le=I('<!> <div class="mapContainer svelte-11p9u5n"><!> <!></div>',1);function fa(e,s){U(s,!0);const o=ye(),w=()=>ee(qe,"$mapCenter",o),g=()=>ee(Fe,"$mapZoom",o),l=s.data.searchQuery;let d=he(void 0);const y=l?`Map: ${l}`:"Map",i=f=>{V(d,ge(f))},c=()=>{V(d,void 0)},a=(f,n)=>{N.set({center:f,zoom:n})};var t=Le();be(f=>{_e.title="Tree Map"});var m=M(t);we(m,{title:y});var v=D(m,2),p=b(v);Ce(p,{get center(){return w()},get zoom(){return g()},onChange:i,onMove:a,searchQuery:l,canAdd:!0});var r=D(p,2);Ze(r,{get tree(){return x(d)},onClose:c}),u(v),h(e,t),j()}export{fa as component,na as universal};
