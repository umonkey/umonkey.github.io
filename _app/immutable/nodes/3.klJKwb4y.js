import{g as G}from"../chunks/entry.CFUNJgq2.js";import{w as J,a as K}from"../chunks/api.BasCzs_O.js";import{D as H}from"../chunks/constants.Dy3xyMIV.js";import"../chunks/disclose-version.DqngkMB6.js";import{T as Q,aF as s,N as L,U as V,aE as X,O as o,ac as e,a9 as n,P as j,R as x}from"../chunks/index.B87wyi30.js";import{h as Z}from"../chunks/svelte-head.C6_1kwQK.js";import{a as O,t as R}from"../chunks/template.BfFjc-H-.js";import{a as l}from"../chunks/props.DQcQd9qT.js";import"../chunks/legacy.lHikfPSh.js";import{t as z}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.DUlcVnVJ.js";import{r as ee}from"../chunks/routes.zEpojgHd.js";import{A as te}from"../chunks/AuthWrapper.Ds8JiJ4v.js";import{B}from"../chunks/TextInput.C2a4GgkG.js";import{L as ae,S as re,H as oe,C as ne,a as se,b as le,Y as de,N as ie}from"../chunks/YearInput.B3rrndXB.js";import{H as ue}from"../chunks/Header.2UU6XZ0B.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d=new r.Error().stack;d&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[d]="7ce6d2b1-1cdd-4912-89e9-cfa1d1ac0c98",r._sentryDebugIdIdentifier="sentry-dbid-7ce6d2b1-1cdd-4912-89e9-cfa1d1ac0c98")}catch{}})();const M=({url:r})=>{const d=parseFloat(r.searchParams.get("lat")??H[0]),i=parseFloat(r.searchParams.get("lng")??H[1]);return{lat:d,lng:i}},ce=M?J(M):void 0,Ne=Object.freeze(Object.defineProperty({__proto__:null,load:ce},Symbol.toStringTag,{value:"Module"}));var pe=R('<!> <!> <!> <!> <!> <!> <!> <!> <div class="buttons"><!> <!></div>',1),me=R('<!> <div class="form svelte-1jizvdx"><!></div>',1);function Pe(r,d){Q(d,!0);let i=s(!1),p=s(""),m=s(""),v=s(""),f=s(""),g=s(""),_=s(""),u=s(l([d.data.lat,d.data.lng])),b=s("");const c=a=>{if(a===""||a==="0")return null;const h=parseFloat(a);return isNaN(h)?null:h},U=()=>{n(i,!0),K.addTree({points:[{lat:e(u)[0],lon:e(u)[1]}],species:e(p),height:c(e(m)),diameter:c(e(v)),circumference:c(e(f)),state:e(g),notes:e(_),year:c(e(b))}).then(a=>{a.status>=200&&a.status<400?G(ee.treeDetails(a.data.trees[0].id)):(console.error(`Error ${a.status} adding tree.`),z.push("Error adding tree."))}).catch(a=>{console.error(`Error adding tree: ${a}.`),z.push("Error adding tree.")}).finally(()=>{n(i,!1)})},W=()=>{history.back()};var y=me();Z(a=>{X.title="Add tree"});var I=L(y);ue(I,{title:"Add Tree"});var C=o(I,2),Y=j(C);te(Y,{children:(a,h)=>{var E=pe(),S=L(E);ae(S,{label:"Confirm location",get value(){return e(u)},set value(t){n(u,l(t))}});var w=o(S,2);re(w,{get value(){return e(p)},set value(t){n(p,l(t))}});var A=o(w,2);oe(A,{get value(){return e(m)},set value(t){n(m,l(t))}});var D=o(A,2);ne(D,{get value(){return e(v)},set value(t){n(v,l(t))}});var $=o(D,2);se($,{get value(){return e(f)},set value(t){n(f,l(t))}});var N=o($,2);le(N,{get value(){return e(g)},set value(t){n(g,l(t))}});var P=o(N,2);de(P,{get value(){return e(b)},set value(t){n(b,l(t))}});var T=o(P,2);ie(T,{get value(){return e(_)},set value(t){n(_,l(t))}});var F=o(T,2),k=j(F);B(k,{type:"submit",label:"Add tree",onClick:U,get disabled(){return e(i)}});var q=o(k,2);B(q,{type:"cancel",label:"Cancel",onClick:W,get disabled(){return e(i)}}),x(F),O(a,E)},$$slots:{default:!0}}),x(C),O(r,y),V()}export{Pe as component,Ne as universal};
