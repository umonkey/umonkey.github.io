import"../chunks/entry.DHwIHR-6.js";import{w as oe,a as ie}from"../chunks/api.D2loYNr0.js";import"../chunks/disclose-version.BlK1kMzR.js";import{h as E,a as ne,i as ce,b as le,aL as fe,L as P,q as de,ac as U,W,V as R,ak as V,aH as B,aM as J,G as A,c as H,p as L,aN as ve,d as ue,a2 as me,e as F,j as b,k as u,f as O,g as T,a5 as x,t as k,s as D,a1 as pe,ax as _e,aa as K}from"../chunks/utils.CFhoaAiD.js";import{i as j,b as X,s as he,h as be,a as Y}from"../chunks/store.D7wMafqz.js";import{a as h,t as I,c as q,d as $,e as ge}from"../chunks/template.BnrarM8h.js";import{p as ee,a as ye}from"../chunks/props.DVQ-LOBM.js";import{H as we}from"../chunks/Header.Dw6SMVSF.js";import{M as Ce}from"../chunks/Map.CoEAWePj.js";import{i as xe}from"../chunks/legacy.D4frCxXy.js";import{s as G}from"../chunks/attributes.CRngR2u9.js";import{C as ke}from"../chunks/CloseIcon.CmyHXV2m.js";import{e as De,i as Ie}from"../chunks/each.0a5KL-Ey.js";import{r as Q}from"../chunks/routes.Coe4Xs8_.js";import{f as Me,s as Te}from"../chunks/trees.BaSnKDeF.js";import{w as Ne,d as te}from"../chunks/index.BFoUtggM.js";import{D as Se}from"../chunks/constants.C5QxALk6.js";import{l as re}from"../chunks/auth.cnE7Sp25.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="b4db9c26-7c98-490c-b475-7f6c709dc6db",e._sentryDebugIdIdentifier="sentry-dbid-b4db9c26-7c98-490c-b475-7f6c709dc6db")}catch{}})();const z=0,M=1,Z=2;function Ee(e,r,o,w,g){E&&ne();var l=e,v=ce(),y=me,i=U,f,a,t,m=(v?W:R)(void 0),d=(v?W:R)(void 0),p=!1;function s(n,_){p=!0,_&&(V(c),B(c),J(y));try{n===z&&o&&(f?A(f):f=H(()=>o(l))),n===M&&w&&(a?A(a):a=H(()=>w(l,m))),n===Z&&g&&(t?A(t):t=H(()=>g(l,d))),n!==z&&f&&L(f,()=>f=null),n!==M&&a&&L(a,()=>a=null),n!==Z&&t&&L(t,()=>t=null)}finally{_&&(J(null),B(null),V(null),ve())}}var c=le(()=>{if(i!==(i=r())){if(fe(i)){var n=i;p=!1,n.then(_=>{n===i&&(P(m,_),s(M,!0))},_=>{if(n===i)throw P(d,_),s(Z,!0),d.v}),E||de(()=>{p||s(z,!0)})}else P(m,i),s(M,!1);return()=>i=U}});E&&(l=ue)}const ae=({url:e})=>{const r=e.searchParams.get("q");return console.debug(window.location.hash),{searchQuery:r}},Pe=ae?oe(ae):void 0,ia=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var Ae=I('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),He=I('<div class="images svelte-5k02eh"></div>'),Le=I('<div class="gallery svelte-5k02eh"><!></div>');function ze(e,r){F(r,!0);var o=Le(),w=b(o);Ee(w,()=>ie.getTree(r.tree.id),null,(g,l)=>{var v=q(),y=T(v);{var i=a=>{var t=$("Failed to load photos.");h(a,t)},f=a=>{var t=q(),m=T(t);{var d=s=>{var c=$("No images for this tree.");h(s,c)},p=s=>{var c=He();De(c,21,()=>x(l).data.files,Ie,(n,_)=>{var C=Ae(),S=b(C);k(()=>G(S,"href",Q.treeDetails(r.tree.id)));var se=b(S);k(()=>G(se,"src",Q.file(x(_).small_id))),u(S),u(C),h(n,C)}),u(c),h(s,c)};j(m,s=>{x(l).data.files.length==0?s(d):s(p,!1)},!0)}h(a,t)};j(y,a=>{x(l).status!=200?a(i):a(f,!1)})}h(g,v)}),u(o),h(e,o),O()}var Ze=I('<div class="preview svelte-1hfbc1n"><div class="header svelte-1hfbc1n"><div class="title svelte-1hfbc1n"><a> </a></div> <button class="close svelte-1hfbc1n"><!></button></div> <div class="props"> </div> <!></div>');function je(e,r){F(r,!1);let o=ee(r,"tree",8),w=ee(r,"onClose",8);xe();var g=q(),l=T(g);{var v=y=>{var i=Ze(),f=b(i),a=b(f),t=b(a);k(()=>G(t,"href",Q.treeDetails(o().id)));var m=b(t,!0);k(()=>X(m,Me(o().species))),u(t),u(a);var d=D(a,2),p=b(d);ke(p,{}),u(d),u(f);var s=D(f,2),c=b(s,!0);k(()=>X(c,Te(o()))),u(s);var n=D(s,2);ze(n,{get tree(){return o()}}),u(i),ge("click",d,function(..._){var C;(C=w())==null||C.apply(this,_)}),h(y,i)};j(l,y=>{o()&&y(v)})}h(e,g),O()}const N=Ne(re.read("mapState")||{center:Se,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const qe=te(N,e=>e.center),Ge=te(N,e=>e.zoom);var Qe=I('<!> <div class="mapContainer svelte-11p9u5n"><!> <!></div>',1);function na(e,r){F(r,!0);const o=he(),w=()=>Y(qe,"$mapCenter",o),g=()=>Y(Ge,"$mapZoom",o),l=r.data.searchQuery;let v=_e(void 0);const y=l?`Map: ${l}`:"Map",i=c=>{K(v,ye(c))},f=()=>{K(v,void 0)},a=(c,n)=>{N.set({center:c,zoom:n})};var t=Qe();be(c=>{pe.title="Tree Map"});var m=T(t);we(m,{title:y});var d=D(m,2),p=b(d);Ce(p,{get center(){return w()},get zoom(){return g()},onChange:i,onMove:a,searchQuery:l,canAdd:!0});var s=D(p,2);je(s,{get tree(){return x(v)},onClose:f}),u(d),h(e,t),O()}export{na as component,ia as universal};
