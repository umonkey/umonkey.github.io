import"../chunks/entry.71SQ_wY7.js";import{a as n,w as s}from"../chunks/api.DhTczN_B.js";import{a as i}from"../chunks/auth.az8VCGXi.js";import{e as c}from"../chunks/index.COo6XIVY.js";import"../chunks/disclose-version.D-uV0LY6.js";import{j as d,k as u}from"../chunks/index.6fWcJMZL.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f5bc7e02-c198-4f40-9474-8805a37e9e29",e._sentryDebugIdIdentifier="sentry-dbid-f5bc7e02-c198-4f40-9474-8805a37e9e29")}catch{}})();const r=async({url:e})=>{const t=e.searchParams.get("token"),o=e.searchParams.get("state");console.debug(`[auth] token=${t}`),console.debug(`[auth] state=${o}`);const a=await n.getMe(t);return a.status!==200&&(console.error("[auth] Error fetching user data"),c(401)),console.info(`[auth] Logged in as ${a.data.name}`),i.set({token:t,name:a.data.name,picture:a.data.picture}),{redirect:o}},f=r?s(r):void 0,y=Object.freeze(Object.defineProperty({__proto__:null,load:f},Symbol.toStringTag,{value:"Module"}));function w(e,t){d(t,!0),window.location.href=t.data.redirect,u()}export{w as component,y as universal};
