import"../chunks/entry.C4g3lS3g.js";import{w as oe,a as ie}from"../chunks/api.CC94BoDS.js";import"../chunks/disclose-version.B2rXiN4X.js";import{h as z,a as ne,i as le,b as ve,aN as fe,w as E,q as ce,aa as R,K as U,J,aj as K,ay as W,aO as B,n as S,c as Q,p as q,aP as de,d as ue,a0 as me,R as F,P as g,Q as u,T as G,N as T,ab as x,t as D,O as I,a3 as pe,a4 as te,aD as _e,aM as he,a8 as V}from"../chunks/index.BzXfXzR0.js";import{h as ge}from"../chunks/svelte-head.Axeo-4SS.js";import{a as h,t as k,c as O,f as X}from"../chunks/template.CwzYuxmV.js";import{p as Y,a as be}from"../chunks/props.jYnF2D1S.js";import{i as Z,b as $,s as ye,a as ee}from"../chunks/store.BhaMp9_P.js";import{H as we}from"../chunks/Header.BGvhgTA9.js";import{M as Ce}from"../chunks/Map.BbuUxS1H.js";import{i as xe}from"../chunks/legacy.B0sGpCCt.js";import{s as j}from"../chunks/attributes.BxnZCaQV.js";import{e as De}from"../chunks/events.C98iwaOo.js";import{C as Ie}from"../chunks/CloseIcon.CXVXFDCs.js";import{e as ke,i as Me}from"../chunks/each.BsvU7NWM.js";import{r as L}from"../chunks/routes.WJhfy6l1.js";import{s as Te}from"../chunks/trees.BKPHwvNe.js";import{l as re}from"../chunks/auth.Q4ovHMcz.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="e4020640-a9b6-4f60-aa1d-85e11aa36ea5",e._sentryDebugIdIdentifier="sentry-dbid-e4020640-a9b6-4f60-aa1d-85e11aa36ea5")}catch{}})();const A=0,M=1,H=2;function Ne(e,s,o,w,b){z&&ne();var v=e,d=le(),y=me,i=R,f,a,t,m=(d?U:J)(void 0),c=(d?U:J)(void 0),p=!1;function r(n,_){p=!0,_&&(K(l),W(l),B(y));try{n===A&&o&&(f?S(f):f=Q(()=>o(v))),n===M&&w&&(a?S(a):a=Q(()=>w(v,m))),n===H&&b&&(t?S(t):t=Q(()=>b(v,c))),n!==A&&f&&q(f,()=>f=null),n!==M&&a&&q(a,()=>a=null),n!==H&&t&&q(t,()=>t=null)}finally{_&&(B(null),W(null),K(null),de())}}var l=ve(()=>{if(i!==(i=s())){if(fe(i)){var n=i;p=!1,n.then(_=>{n===i&&(E(m,_),r(M,!0))},_=>{if(n===i)throw E(c,_),r(H,!0),c.v}),z||ce(()=>{p||r(A,!0)})}else E(m,i),r(M,!1);return()=>i=R}});z&&(v=ue)}const ae=({url:e})=>({searchQuery:e.searchParams.get("q")}),Pe=ae?oe(ae):void 0,oa=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var ze=k('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Ee=k('<div class="images svelte-5k02eh"></div>'),Se=k('<div class="gallery svelte-5k02eh"><!></div>');function Qe(e,s){F(s,!0);var o=Se(),w=g(o);Ne(w,()=>ie.getTree(s.tree.id),null,(b,v)=>{var d=O(),y=T(d);{var i=a=>{var t=X("Failed to load photos.");h(a,t)},f=a=>{var t=O(),m=T(t);{var c=r=>{var l=X("No images for this tree.");h(r,l)},p=r=>{var l=Ee();ke(l,21,()=>x(v).data.files,Me,(n,_)=>{var C=ze(),P=g(C);D(()=>j(P,"href",L.treeDetails(s.tree.id)));var se=g(P);D(()=>j(se,"src",L.file(x(_).small_id))),u(P),u(C),h(n,C)}),u(l),h(r,l)};Z(m,r=>{x(v).data.files.length==0?r(c):r(p,!1)},!0)}h(a,t)};Z(y,a=>{x(v).status!=200?a(i):a(f,!1)})}h(b,d)}),u(o),h(e,o),G()}var qe=k('<div class="preview svelte-mz5173"><div class="header svelte-mz5173"><div class="title svelte-mz5173"><a> </a></div> <button class="close svelte-mz5173"><!></button></div> <div class="props"> </div> <!></div>');function Ae(e,s){F(s,!1);let o=Y(s,"tree",8),w=Y(s,"onClose",8);xe();var b=O(),v=T(b);{var d=y=>{var i=qe(),f=g(i),a=g(f),t=g(a);D(()=>j(t,"href",L.treeDetails(o().id)));var m=g(t,!0);u(t),u(a);var c=I(a,2),p=g(c);Ie(p,{}),u(c),u(f);var r=I(f,2),l=g(r,!0);D(()=>$(l,Te(o()))),u(r);var n=I(r,2);Qe(n,{get tree(){return o()}}),u(i),D(()=>$(m,o().species)),De("click",c,function(..._){var C;(C=w())==null||C.apply(this,_)}),h(y,i)};Z(v,y=>{o()&&y(d)})}h(e,b),G()}const He=[40.181389,44.514444],N=pe(re.read("mapState")||{center:He,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const Oe=te(N,e=>e.center),Ze=te(N,e=>e.zoom);var je=k('<!> <div class="mapContainer svelte-fq13u2"><!> <!></div>',1);function ia(e,s){F(s,!0);const o=ye(),w=()=>ee(Oe,"$mapCenter",o),b=()=>ee(Ze,"$mapZoom",o),v=s.data.searchQuery;let d=he(void 0);const y=v?`Map: ${v}`:"Map",i=l=>{V(d,be(l))},f=()=>{V(d,void 0)},a=(l,n)=>{N.set({center:l,zoom:n})};var t=je();ge(l=>{_e.title="Tree Map"});var m=T(t);we(m,{title:y});var c=I(m,2),p=g(c);Ce(p,{get center(){return w()},get zoom(){return b()},onChange:i,onMove:a,searchQuery:v});var r=I(p,2);Ae(r,{get tree(){return x(d)},onClose:f}),u(c),h(e,t),G()}export{ia as component,oa as universal};
