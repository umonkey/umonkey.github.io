import"../chunks/entry.kzwDQBDE.js";import{w as oe}from"../chunks/load.DiFz2wEx.js";import{a as m,n as ie,t as k,c as O,g as B}from"../chunks/disclose-version.zM6ZaIj6.js";import{h as E,a as ne,i as le,b as ce,aM as fe,v as P,q as ve,ah as F,J as R,G as W,ap as J,ay as V,aN as X,m as S,c as A,p as Z,aO as de,d as me,O as ue,Y as U,W as y,X as _,Z as j,U as D,R as C,t as M,V as I,a9 as pe,aa as ae,af as Y,aB as _e,aL as he}from"../chunks/index.CKxi7U8c.js";import{h as ge}from"../chunks/svelte-head.CspwuYTD.js";import{p as $,a as be}from"../chunks/props.BfwDnvYG.js";import{i as Q,b as K,s as ye,a as ee}from"../chunks/store.DZTQ6oT4.js";import{H as we}from"../chunks/Header.CalykERh.js";import{M as xe}from"../chunks/Map.BX_6zncQ.js";import"../chunks/legacy.Dv1vyr0W.js";import{s as q}from"../chunks/attributes.B_Ov7eLx.js";import{e as Ce}from"../chunks/events.BvB3UgJu.js";import{i as Me}from"../chunks/lifecycle.gn2u0cJL.js";import{e as Ie,i as ke}from"../chunks/each.C0ytD5G5.js";import{r as G}from"../chunks/routes.D873Hdyn.js";import{a as ze}from"../chunks/api.BQgidOML.js";import{s as De}from"../chunks/trees.b87kkBTl.js";import{l as re}from"../chunks/auth.DGULp8lb.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="5fd297f9-cc41-4017-957c-b2474d85ff63",e._sentryDebugIdIdentifier="sentry-dbid-5fd297f9-cc41-4017-957c-b2474d85ff63")}catch{}})();const H=0,z=1,L=2;function Te(e,r,o,w,h){E&&ne();var n=e,d=le(),g=ue,i=F,l,a,s,u=(d?R:W)(void 0),f=(d?R:W)(void 0),b=!1;function t(c,p){b=!0,p&&(J(v),V(v),X(g));try{c===H&&o&&(l?S(l):l=A(()=>o(n))),c===z&&w&&(a?S(a):a=A(()=>w(n,u))),c===L&&h&&(s?S(s):s=A(()=>h(n,f))),c!==H&&l&&Z(l,()=>l=null),c!==z&&a&&Z(a,()=>a=null),c!==L&&s&&Z(s,()=>s=null)}finally{p&&(X(null),V(null),J(null),de())}}var v=ce(()=>{if(i!==(i=r())){if(fe(i)){var c=i;b=!1,c.then(p=>{c===i&&(P(u,p),t(z,!0))},p=>{if(c===i)throw P(f,p),t(L,!0),f.v}),E||ve(()=>{b||t(H,!0)})}else P(u,i),t(z,!1);return()=>i=F}});E&&(n=me)}const te=({url:e})=>({searchQuery:e.searchParams.get("q")}),Ne=te?oe(te):void 0,nt=Object.freeze(Object.defineProperty({__proto__:null,load:Ne},Symbol.toStringTag,{value:"Module"}));var Ee=ie('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>');function Pe(e){var r=Ee();m(e,r)}var Se=k('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Ae=k('<div class="images svelte-5k02eh"></div>'),Ze=k('<div class="gallery svelte-5k02eh"><!></div>');function He(e,r){U(r,!0);var o=Ze(),w=y(o);Te(w,()=>ze.getTree(r.tree.id),null,(h,n)=>{var d=O(),g=D(d);{var i=a=>{var s=B("Failed to load photos.");m(a,s)},l=a=>{var s=O(),u=D(s);{var f=t=>{var v=B("No images for this tree.");m(t,v)},b=t=>{var v=Ae();Ie(v,21,()=>C(n).data.files,ke,(c,p)=>{var x=Se(),N=y(x);M(()=>q(N,"href",G.treeDetails(r.tree.id)));var se=y(N);M(()=>q(se,"src",G.file(C(p).small_id))),_(N),_(x),m(c,x)}),_(v),m(t,v)};Q(u,t=>{C(n).data.files.length==0?t(f):t(b,!1)},!0)}m(a,s)};Q(g,a=>{C(n).status!=200?a(i):a(l,!1)})}m(h,d)}),_(o),m(e,o),j()}var Le=k('<div class="preview svelte-mz5173"><div class="header svelte-mz5173"><div class="title svelte-mz5173"><a> </a></div> <button class="close svelte-mz5173"><!></button></div> <div class="props"> </div> <!></div>');function Oe(e,r){U(r,!1);let o=$(r,"tree",8),w=$(r,"onClose",8);Me();var h=O(),n=D(h);{var d=g=>{var i=Le(),l=y(i),a=y(l),s=y(a);M(()=>q(s,"href",G.treeDetails(o().id)));var u=y(s,!0);_(s),_(a);var f=I(a,2),b=y(f);Pe(b),_(f),_(l);var t=I(l,2),v=y(t,!0);M(()=>K(v,De(o()))),_(t);var c=I(t,2);He(c,{get tree(){return o()}}),_(i),M(()=>K(u,o().species)),Ce("click",f,function(...p){var x;(x=w())==null||x.apply(this,p)}),m(g,i)};Q(n,g=>{o()&&g(d)})}m(e,h),j()}const Qe=[40.181389,44.514444],T=pe(re.read("mapState")||{center:Qe,zoom:15});T.subscribe(e=>{re.write("mapState",e)});const qe=ae(T,e=>e.center),Ge=ae(T,e=>e.zoom);var Ue=k("<!> <!> <!>",1);function lt(e,r){U(r,!0);const o=ye(),w=()=>ee(qe,"$mapCenter",o),h=()=>ee(Ge,"$mapZoom",o),n=r.data.searchQuery;let d=he(void 0);const g=n?`Map: ${n}`:"Map",i=t=>{Y(d,be(t))},l=()=>{Y(d,void 0)},a=(t,v)=>{T.set({center:t,zoom:v})};var s=Ue();ge(t=>{_e.title="Tree Map"});var u=D(s);we(u,{title:g});var f=I(u,2);xe(f,{get center(){return w()},get zoom(){return h()},onChange:i,onMove:a,searchQuery:n});var b=I(f,2);Oe(b,{get tree(){return C(d)},onClose:l}),m(e,s),j()}export{lt as component,nt as universal};
//# sourceMappingURL=3.CJdAzn0_.js.map
