import"../chunks/entry.DlYsT7ON.js";import{w as oe}from"../chunks/load.DiFz2wEx.js";import{a as m,n as ie,t as k,c as Z,f as J}from"../chunks/disclose-version._t3PWmaq.js";import{h as P,a as ne,i as le,b as ce,aK as ve,v as E,q as fe,aa as R,J as U,G as B,aj as K,ax as W,aL as $,m as S,c as A,p as Q,aM as de,d as me,a1 as ue,Q as O,O as y,P as _,R as F,M as D,ab as C,t as M,N as I,a8 as V,aA as pe,aJ as _e}from"../chunks/utils.Ci9fRg-F.js";import{h as he}from"../chunks/svelte-head.BoA_FgJa.js";import{p as X,a as ge}from"../chunks/props.eaIvaXyI.js";import{i as j,b as Y,s as be,a as ee}from"../chunks/store.CNfkVf8V.js";import{H as ye}from"../chunks/Header.D2P3aTbg.js";import{M as we}from"../chunks/Map.BJXWIr4N.js";import{i as xe}from"../chunks/legacy.CmkxpB-O.js";import{s as q}from"../chunks/attributes.BeY_xUAO.js";import{e as Ce}from"../chunks/events.CmeK1yjR.js";import{e as Me,i as Ie}from"../chunks/each.C_MArqWW.js";import{r as G}from"../chunks/routes.BxFzyV5N.js";import{a as ke}from"../chunks/api.DkAeaDf6.js";import{s as ze}from"../chunks/trees.D7pNGD4L.js";import{w as De,d as te}from"../chunks/index.v96-hJh9.js";import{l as re}from"../chunks/auth.CQXVonQ1.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="4ca39340-9223-4537-a596-077e57f4d550",e._sentryDebugIdIdentifier="sentry-dbid-4ca39340-9223-4537-a596-077e57f4d550")}catch{}})();const H=0,z=1,L=2;function Te(e,r,o,w,h){P&&ne();var n=e,d=le(),g=ue,i=R,l,t,s,u=(d?U:B)(void 0),v=(d?U:B)(void 0),b=!1;function a(c,p){b=!0,p&&(K(f),W(f),$(g));try{c===H&&o&&(l?S(l):l=A(()=>o(n))),c===z&&w&&(t?S(t):t=A(()=>w(n,u))),c===L&&h&&(s?S(s):s=A(()=>h(n,v))),c!==H&&l&&Q(l,()=>l=null),c!==z&&t&&Q(t,()=>t=null),c!==L&&s&&Q(s,()=>s=null)}finally{p&&($(null),W(null),K(null),de())}}var f=ce(()=>{if(i!==(i=r())){if(ve(i)){var c=i;b=!1,c.then(p=>{c===i&&(E(u,p),a(z,!0))},p=>{if(c===i)throw E(v,p),a(L,!0),v.v}),P||fe(()=>{b||a(H,!0)})}else E(u,i),a(z,!1);return()=>i=R}});P&&(n=me)}const ae=({url:e})=>({searchQuery:e.searchParams.get("q")}),Ne=ae?oe(ae):void 0,na=Object.freeze(Object.defineProperty({__proto__:null,load:Ne},Symbol.toStringTag,{value:"Module"}));var Pe=ie('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>');function Ee(e){var r=Pe();m(e,r)}var Se=k('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Ae=k('<div class="images svelte-5k02eh"></div>'),Qe=k('<div class="gallery svelte-5k02eh"><!></div>');function He(e,r){O(r,!0);var o=Qe(),w=y(o);Te(w,()=>ke.getTree(r.tree.id),null,(h,n)=>{var d=Z(),g=D(d);{var i=t=>{var s=J("Failed to load photos.");m(t,s)},l=t=>{var s=Z(),u=D(s);{var v=a=>{var f=J("No images for this tree.");m(a,f)},b=a=>{var f=Ae();Me(f,21,()=>C(n).data.files,Ie,(c,p)=>{var x=Se(),N=y(x);M(()=>q(N,"href",G.treeDetails(r.tree.id)));var se=y(N);M(()=>q(se,"src",G.file(C(p).small_id))),_(N),_(x),m(c,x)}),_(f),m(a,f)};j(u,a=>{C(n).data.files.length==0?a(v):a(b,!1)},!0)}m(t,s)};j(g,t=>{C(n).status!=200?t(i):t(l,!1)})}m(h,d)}),_(o),m(e,o),F()}var Le=k('<div class="preview svelte-mz5173"><div class="header svelte-mz5173"><div class="title svelte-mz5173"><a> </a></div> <button class="close svelte-mz5173"><!></button></div> <div class="props"> </div> <!></div>');function Ze(e,r){O(r,!1);let o=X(r,"tree",8),w=X(r,"onClose",8);xe();var h=Z(),n=D(h);{var d=g=>{var i=Le(),l=y(i),t=y(l),s=y(t);M(()=>q(s,"href",G.treeDetails(o().id)));var u=y(s,!0);_(s),_(t);var v=I(t,2),b=y(v);Ee(b),_(v),_(l);var a=I(l,2),f=y(a,!0);M(()=>Y(f,ze(o()))),_(a);var c=I(a,2);He(c,{get tree(){return o()}}),_(i),M(()=>Y(u,o().species)),Ce("click",v,function(...p){var x;(x=w())==null||x.apply(this,p)}),m(g,i)};j(n,g=>{o()&&g(d)})}m(e,h),F()}const je=[40.181389,44.514444],T=De(re.read("mapState")||{center:je,zoom:15});T.subscribe(e=>{re.write("mapState",e)});const qe=te(T,e=>e.center),Ge=te(T,e=>e.zoom);var Oe=k("<!> <!> <!>",1);function la(e,r){O(r,!0);const o=be(),w=()=>ee(qe,"$mapCenter",o),h=()=>ee(Ge,"$mapZoom",o),n=r.data.searchQuery;let d=_e(void 0);const g=n?`Map: ${n}`:"Map",i=a=>{V(d,ge(a))},l=()=>{V(d,void 0)},t=(a,f)=>{T.set({center:a,zoom:f})};var s=Oe();he(a=>{pe.title="Tree Map"});var u=D(s);ye(u,{title:g});var v=I(u,2);we(v,{get center(){return w()},get zoom(){return h()},onChange:i,onMove:t,searchQuery:n});var b=I(v,2);Ze(b,{get tree(){return C(d)},onClose:l}),m(e,s),F()}export{la as component,na as universal};
//# sourceMappingURL=3.BFIeprVL.js.map
