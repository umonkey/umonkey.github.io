import{a as c,n as se,t as D,c as U,f as K}from"../chunks/disclose-version.DY74GWiO.js";import{h as N,a as oe,aE as ie,b as ne,aJ as le,n as P,q as ve,Z as R,D as V,C as W,am as X,av as j,aK as O,k as A,c as S,p as Z,aL as fe,d as ce,L as de,W as B,U as w,V as u,X as J,S as T,P as C,t as I,T as k,ad as Q,ay as me,aI as ue}from"../chunks/utils.D86ytmYn.js";import{h as pe}from"../chunks/svelte-head.Ty0Ywc9y.js";import{p as Y,a as _e}from"../chunks/props.DTfvni9R.js";import{b as $,s as he,a as ee}from"../chunks/store.Dxm-wBxD.js";import{H as ge}from"../chunks/Header.C-xIOhRW.js";import{M as be}from"../chunks/Map.B7DgFx1u.js";import"../chunks/legacy.HyJtNDBX.js";import{i as q}from"../chunks/if.wMMPy1xP.js";import{s as F}from"../chunks/attributes.C1y7BMKd.js";import{e as we}from"../chunks/events.Bxy5_0Jp.js";import{i as ye}from"../chunks/lifecycle.Dxx2t3N5.js";import{e as xe,i as Ce}from"../chunks/each.Bza4mlJU.js";import{r as G}from"../chunks/routes.Bhqm_Afu.js";import{a as Ie}from"../chunks/api.D1AKXAa3.js";import{s as ke}from"../chunks/trees.THYFYkOW.js";import{w as De,d as te}from"../chunks/index.BX8gnf3H.js";import{l as ae}from"../chunks/auth.DNfHSS48.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="463a2db3-7cca-4e8a-b15b-cf29f8305184",e._sentryDebugIdIdentifier="sentry-dbid-463a2db3-7cca-4e8a-b15b-cf29f8305184")}catch{}})();const H=0,z=1,L=2;function ze(e,r,s,y,p){N&&oe();var l=e,_=ie(),h=de,o=R,i,t,a,g=(_?V:W)(void 0),v=(_?V:W)(void 0),b=!1;function n(f,m){b=!0,m&&(X(d),j(d),O(h));try{f===H&&s&&(i?A(i):i=S(()=>s(l))),f===z&&y&&(t?A(t):t=S(()=>y(l,g))),f===L&&p&&(a?A(a):a=S(()=>p(l,v))),f!==H&&i&&Z(i,()=>i=null),f!==z&&t&&Z(t,()=>t=null),f!==L&&a&&Z(a,()=>a=null)}finally{m&&(O(null),j(null),X(null),fe())}}var d=ne(()=>{if(o!==(o=r())){if(le(o)){var f=o;b=!1,f.then(m=>{f===o&&(P(g,m),n(z,!0))},m=>{if(f===o)throw P(v,m),n(L,!0),v.v}),N||ve(()=>{b||n(H,!0)})}else P(g,o),n(z,!1);return()=>o=R}});N&&(l=ce)}var Te=se('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>');function Ee(e){var r=Te();c(e,r)}var Me=D('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Ne=D('<div class="images svelte-5k02eh"></div>'),Pe=D('<div class="gallery svelte-5k02eh"><!></div>');function Ae(e,r){B(r,!0);var s=Pe(),y=w(s);ze(y,()=>Ie.getTree(r.tree.id),null,(p,l)=>{var _=U(),h=T(_);{var o=t=>{var a=K("Failed to load photos.");c(t,a)},i=t=>{var a=U(),g=T(a);{var v=n=>{var d=K("No images for this tree.");c(n,d)},b=n=>{var d=Ne();xe(d,21,()=>C(l).data.files,Ce,(f,m)=>{var x=Me(),M=w(x);I(()=>F(M,"href",G.treeDetails(r.tree.id)));var re=w(M);I(()=>F(re,"src",G.file(C(m).small_id))),u(M),u(x),c(f,x)}),u(d),c(n,d)};q(g,n=>{C(l).data.files.length==0?n(v):n(b,!1)},!0)}c(t,a)};q(h,t=>{C(l).status!=200?t(o):t(i,!1)})}c(p,_)}),u(s),c(e,s),J()}var Se=D('<div class="preview svelte-mz5173"><div class="header svelte-mz5173"><div class="title svelte-mz5173"><a> </a></div> <button class="close svelte-mz5173"><!></button></div> <div class="props"> </div> <!></div>');function Ze(e,r){B(r,!1);let s=Y(r,"tree",8),y=Y(r,"onClose",8);ye();var p=U(),l=T(p);{var _=h=>{var o=Se(),i=w(o),t=w(i),a=w(t);I(()=>F(a,"href",G.treeDetails(s().id)));var g=w(a,!0);u(a),u(t);var v=k(t,2),b=w(v);Ee(b),u(v),u(i);var n=k(i,2),d=w(n,!0);I(()=>$(d,ke(s()))),u(n);var f=k(n,2);Ae(f,{get tree(){return s()}}),u(o),I(()=>$(g,s().species)),we("click",v,function(...m){var x;(x=y())==null||x.apply(this,m)}),c(h,o)};q(l,h=>{s()&&h(_)})}c(e,p),J()}const He=[40.181389,44.514444],E=De(ae.read("mapState")||{center:He,zoom:15});E.subscribe(e=>{ae.write("mapState",e)});const Le=te(E,e=>e.center),Ue=te(E,e=>e.zoom);var qe=D("<!> <!> <!>",1);function st(e,r){B(r,!0);const s=he(),y=()=>ee(Le,"$mapCenter",s),p=()=>ee(Ue,"$mapZoom",s);let l=ue(void 0);const _=v=>{Q(l,_e(v))},h=()=>{Q(l,void 0)},o=(v,b)=>{E.set({center:v,zoom:b})};var i=qe();pe(v=>{me.title="Map"});var t=T(i);ge(t,{title:"Tree"});var a=k(t,2);be(a,{get center(){return y()},get zoom(){return p()},onChange:_,onMove:o});var g=k(a,2);Ze(g,{get tree(){return C(l)},onClose:h}),c(e,i),J()}export{st as component};
//# sourceMappingURL=3.BLMsjipN.js.map
