import"../chunks/entry.CNrZ7C6w.js";import{w as oe,a as ie}from"../chunks/api.DA6MqeHl.js";import"../chunks/disclose-version.B8XhIGqT.js";import{h as z,a as ne,i as le,b as fe,aN as ce,w as E,q as ve,aa as R,K as U,J as B,aj as J,ay as K,aO as W,n as S,c as Q,p as A,aP as de,d as ue,a0 as me,R as F,P as y,Q as p,T as G,N as T,ab as x,t as I,O as k,a3 as _e,a4 as te,a8 as V,aB as pe,aM as he}from"../chunks/index.CbWQdyPD.js";import{h as ge}from"../chunks/svelte-head.DlRxUE2U.js";import{a as _,t as D,c as Z,f as X}from"../chunks/template.FARQGre2.js";import{p as Y,a as be}from"../chunks/props.BqljOmi8.js";import{i as j,b as $,s as ye,a as ee}from"../chunks/store.y-p8vbky.js";import{H as we}from"../chunks/Header.DSb65TzA.js";import{M as Ce}from"../chunks/Map.C9eGqMHN.js";import{i as xe}from"../chunks/legacy.Cuu4uX5Q.js";import{s as q}from"../chunks/attributes.Bszi7fWb.js";import{e as Ie}from"../chunks/events.Dh_5afs_.js";import{C as ke}from"../chunks/CloseIcon.EFRTzfiR.js";import{e as De,i as Me}from"../chunks/each.8C-LENRi.js";import{r as L}from"../chunks/routes.CkSUeSPM.js";import{s as Te}from"../chunks/trees.BhrRlju5.js";import{l as re}from"../chunks/auth.C3pQt9CG.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="e4c1422b-817f-4f16-85c2-dc1ffa4c4bf3",e._sentryDebugIdIdentifier="sentry-dbid-e4c1422b-817f-4f16-85c2-dc1ffa4c4bf3")}catch{}})();const H=0,M=1,O=2;function Ne(e,s,o,w,h){z&&ne();var n=e,d=le(),g=me,i=R,l,t,r,u=(d?U:B)(void 0),c=(d?U:B)(void 0),b=!1;function a(f,m){b=!0,m&&(J(v),K(v),W(g));try{f===H&&o&&(l?S(l):l=Q(()=>o(n))),f===M&&w&&(t?S(t):t=Q(()=>w(n,u))),f===O&&h&&(r?S(r):r=Q(()=>h(n,c))),f!==H&&l&&A(l,()=>l=null),f!==M&&t&&A(t,()=>t=null),f!==O&&r&&A(r,()=>r=null)}finally{m&&(W(null),K(null),J(null),de())}}var v=fe(()=>{if(i!==(i=s())){if(ce(i)){var f=i;b=!1,f.then(m=>{f===i&&(E(u,m),a(M,!0))},m=>{if(f===i)throw E(c,m),a(O,!0),c.v}),z||ve(()=>{b||a(H,!0)})}else E(u,i),a(M,!1);return()=>i=R}});z&&(n=ue)}const ae=({url:e})=>({searchQuery:e.searchParams.get("q")}),Pe=ae?oe(ae):void 0,oa=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var ze=D('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Ee=D('<div class="images svelte-5k02eh"></div>'),Se=D('<div class="gallery svelte-5k02eh"><!></div>');function Qe(e,s){F(s,!0);var o=Se(),w=y(o);Ne(w,()=>ie.getTree(s.tree.id),null,(h,n)=>{var d=Z(),g=T(d);{var i=t=>{var r=X("Failed to load photos.");_(t,r)},l=t=>{var r=Z(),u=T(r);{var c=a=>{var v=X("No images for this tree.");_(a,v)},b=a=>{var v=Ee();De(v,21,()=>x(n).data.files,Me,(f,m)=>{var C=ze(),P=y(C);I(()=>q(P,"href",L.treeDetails(s.tree.id)));var se=y(P);I(()=>q(se,"src",L.file(x(m).small_id))),p(P),p(C),_(f,C)}),p(v),_(a,v)};j(u,a=>{x(n).data.files.length==0?a(c):a(b,!1)},!0)}_(t,r)};j(g,t=>{x(n).status!=200?t(i):t(l,!1)})}_(h,d)}),p(o),_(e,o),G()}var Ae=D('<div class="preview svelte-mz5173"><div class="header svelte-mz5173"><div class="title svelte-mz5173"><a> </a></div> <button class="close svelte-mz5173"><!></button></div> <div class="props"> </div> <!></div>');function He(e,s){F(s,!1);let o=Y(s,"tree",8),w=Y(s,"onClose",8);xe();var h=Z(),n=T(h);{var d=g=>{var i=Ae(),l=y(i),t=y(l),r=y(t);I(()=>q(r,"href",L.treeDetails(o().id)));var u=y(r,!0);p(r),p(t);var c=k(t,2),b=y(c);ke(b,{}),p(c),p(l);var a=k(l,2),v=y(a,!0);I(()=>$(v,Te(o()))),p(a);var f=k(a,2);Qe(f,{get tree(){return o()}}),p(i),I(()=>$(u,o().species)),Ie("click",c,function(...m){var C;(C=w())==null||C.apply(this,m)}),_(g,i)};j(n,g=>{o()&&g(d)})}_(e,h),G()}const Oe=[40.181389,44.514444],N=_e(re.read("mapState")||{center:Oe,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const Ze=te(N,e=>e.center),je=te(N,e=>e.zoom);var qe=D("<!> <!> <!>",1);function ia(e,s){F(s,!0);const o=ye(),w=()=>ee(Ze,"$mapCenter",o),h=()=>ee(je,"$mapZoom",o),n=s.data.searchQuery;let d=he(void 0);const g=n?`Map: ${n}`:"Map",i=a=>{V(d,be(a))},l=()=>{V(d,void 0)},t=(a,v)=>{N.set({center:a,zoom:v})};var r=qe();ge(a=>{pe.title="Tree Map"});var u=T(r);we(u,{title:g});var c=k(u,2);Ce(c,{get center(){return w()},get zoom(){return h()},onChange:i,onMove:t,searchQuery:n});var b=k(c,2);He(b,{get tree(){return x(d)},onClose:l}),_(e,r),G()}export{ia as component,oa as universal};
//# sourceMappingURL=4.BMBMxvkr.js.map
