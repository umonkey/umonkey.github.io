import{g as Z}from"../chunks/entry.Dyv3iPyE.js";import{a as K,w as ee}from"../chunks/api.C2HWcg3N.js";import{e as N}from"../chunks/index.D9AZGtWN.js";import"../chunks/disclose-version.BTj3oRMp.js";import{e as U,O as o,P as y,t as te,Q as S,aQ as ae,R as re,aM as m,a2 as Q,N as W,T as ne,aB as le,ab as l,a8 as _}from"../chunks/index.CbWQdyPD.js";import{h as oe}from"../chunks/svelte-head.DlRxUE2U.js";import{a as w,t as $}from"../chunks/template.FARQGre2.js";import{i as ue,p as g,a as i}from"../chunks/props.BqljOmi8.js";import{r as se}from"../chunks/routes.ELQv52h8.js";import"../chunks/legacy.Cuu4uX5Q.js";import{t as R}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.B0Rm7KC1.js";import{A as ie}from"../chunks/AuthWrapper.Dy8Ttrah.js";import{T as h,B as G}from"../chunks/Button.D0J8JUB8.js";import{l as ve}from"../chunks/events.Dh_5afs_.js";import{H as de}from"../chunks/Header.CdyLRjLO.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1058f864-db6c-4078-9cbe-1ca7fc5d3c21",e._sentryDebugIdIdentifier="sentry-dbid-1058f864-db6c-4078-9cbe-1ca7fc5d3c21")}catch{}})();function V(e,t,a){if(e.multiple)return fe(e,t);for(var r of e.options){var n=I(r);if(ue(n,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function ce(e,t){U(()=>{var a=new MutationObserver(()=>{var r=e.__value;V(e,r)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function pe(e,t,a=t){var r=!0;ve(e,"change",n=>{var u=n?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(u),I);else{var d=e.querySelector(u)??e.querySelector("option:not([disabled])");v=d&&I(d)}a(v)}),U(()=>{var n=t();if(V(e,n,r),r&&n===void 0){var u=e.querySelector(":checked");u!==null&&(n=I(u),a(n))}e.__value=n,r=!1}),ce(e)}function fe(e,t){for(var a of e.options)a.selected=~t.indexOf(I(a))}function I(e){return"__value"in e?e.__value:e.value}const J=async({params:e})=>{const t=e.id;t||N(404);const a=await K.getTree(t);return a.status!==200&&N(404),{id:t,tree:a.data}},me=J?ee(J):void 0,Ne=Object.freeze(Object.defineProperty({__proto__:null,load:me},Symbol.toStringTag,{value:"Module"}));function _e(e,t){let a=g(t,"value",12,"");h(e,{label:"Species",placeholder:"Enter the name of the tree",hint:"Please use latin names when possible.",get value(){return a()},set value(r){a(r)},$$legacy:!0})}function ge(e,t){let a=g(t,"value",12,"");h(e,{label:"Height, m",type:"number",get value(){return a()},set value(r){a(r)},$$legacy:!0})}function he(e,t){let a=g(t,"value",12,"");h(e,{label:"Canopy diameter, m",type:"number",get value(){return a()},set value(r){a(r)},$$legacy:!0})}function be(e,t){let a=g(t,"value",12,"");h(e,{label:"Trunk circumference, cm",type:"number",hint:"Measure at chest level, aka 120 cm from the ground.",get value(){return a()},set value(r){a(r)},$$legacy:!0})}var ye=$('<div class="input"><label class="svelte-a4sar6"><span class="svelte-a4sar6">State</span> <select class="svelte-a4sar6"><option>(unknown)</option><option>healthy</option><option>sick</option><option>deformed</option><option>gone</option><option>stomp</option></select></label></div>');function Se(e,t){let a=g(t,"value",12,"");var r=ye(),n=y(r),u=o(y(n),2);te(()=>{a(),ae(()=>{})});var v=y(u);v.value=((v.__value="")==null,"");var d=o(v);d.value=(d.__value="healthy")==null?"":"healthy";var c=o(d);c.value=(c.__value="sick")==null?"":"sick";var f=o(c);f.value=(f.__value="deformed")==null?"":"deformed";var b=o(f);b.value=(b.__value="gone")==null?"":"gone";var k=o(b);k.value=(k.__value="stomp")==null?"":"stomp",S(u),S(n),S(r),pe(u,a),w(e,r)}function Ie(e,t){let a=g(t,"value",12,"");h(e,{label:"Address",hint:"This is normally set automatically when adding a tree, but you can edit.",get value(){return a()},set value(r){a(r)},$$legacy:!0})}function ke(e,t){let a=g(t,"value",12,"");h(e,{label:"Description",multiline:!0,hint:"Add some notable details that could help visitors understand the importance of this tree.",get value(){return a()},set value(r){a(r)},$$legacy:!0})}var we=$('<!> <!> <!> <!> <!> <!> <!> <div class="buttons"><!> <!></div>',1),$e=$('<!> <div class="form svelte-1jizvdx"><!></div>',1);function Qe(e,t){var A,x,D;re(t,!0);const a=t.data.id;let r=m(i(t.data.tree.species??"")),n=m(i(((A=t.data.tree.height)==null?void 0:A.toString())??"0")),u=m(i(((x=t.data.tree.diameter)==null?void 0:x.toString())??"0")),v=m(i(((D=t.data.tree.circumference)==null?void 0:D.toString())??"0")),d=m(i(t.data.tree.state??"")),c=m(""),f=m(i(t.data.tree.notes??""));Q(()=>{console.debug("Species changed to:",l(r))}),Q(()=>{console.debug("Address changed to:",l(c))});const b=()=>{K.updateTree(a,{species:l(r),height:parseFloat(l(n)),diameter:parseFloat(l(u)),circumference:parseFloat(l(v)),state:l(d),address:l(c),notes:l(f)}).then(p=>{p.status>=200&&p.status<400?Z(se.treeDetails(a)):(console.error(`Error ${p.status} updating tree.`),R.push("Error updating tree."))}).catch(p=>{console.error(`Error updating tree: ${p}.`),R.push("Error updating tree.")})},k=()=>{history.back()};var C=$e();oe(p=>{le.title="Edit tree"});var E=W(C);de(E,{title:"Edit tree"});var T=o(E,2),X=y(T);ie(X,{children:(p,Ce)=>{var q=we(),O=W(q);_e(O,{get value(){return l(r)},set value(s){_(r,i(s))}});var F=o(O,2);ge(F,{get value(){return l(n)},set value(s){_(n,i(s))}});var H=o(F,2);he(H,{get value(){return l(u)},set value(s){_(u,i(s))}});var M=o(H,2);be(M,{get value(){return l(v)},set value(s){_(v,i(s))}});var P=o(M,2);Se(P,{get value(){return l(d)},set value(s){_(d,i(s))}});var j=o(P,2);Ie(j,{get value(){return l(c)},set value(s){_(c,i(s))}});var B=o(j,2);ke(B,{get value(){return l(f)},set value(s){_(f,i(s))}});var z=o(B,2),L=y(z);G(L,{type:"submit",label:"Save changes",onClick:b});var Y=o(L,2);G(Y,{type:"cancel",label:"Cancel",onClick:k}),S(z),w(p,q)},$$slots:{default:!0}}),S(T),w(e,C),ne()}export{Qe as component,Ne as universal};
//# sourceMappingURL=10.DUEXhiAj.js.map
