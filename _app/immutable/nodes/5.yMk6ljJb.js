import"../chunks/entry.OImHg3gI.js";import{w as oe}from"../chunks/load.BtWDkKTt.js";import"../chunks/disclose-version.vMxi1LYk.js";import{h as E,a as ie,i as ne,b as le,aN as fe,w as S,q as ce,W as G,K,J as R,aq as W,az as J,aO as B,n as q,c as z,p as A,aP as ve,d as de,a3 as me,T as j,P as g,R as m,U as F,N as T,a6 as x,t as I,O as k,ac as ue,ab as te,aK as pe,aM as _e,ah as V}from"../chunks/index.D2QBpCmX.js";import{h as he}from"../chunks/svelte-head.CYodAuYg.js";import{a as h,t as D,c as Q,f as X}from"../chunks/template.AFpqK3Ql.js";import{p as Y,a as ge}from"../chunks/props.Cz6Hg2a0.js";import{b as $,s as be,a as ee}from"../chunks/store.DvNMo4ai.js";import{H as ye}from"../chunks/Header.CvSZHzu2.js";import{M as we}from"../chunks/Map.DGstnj1I.js";import"../chunks/legacy.B__8PB0f.js";import{i as Z}from"../chunks/if.DIZMYV78.js";import{s as L}from"../chunks/attributes.fKJ51INB.js";import{e as Ce}from"../chunks/events.Bo0QLjtm.js";import{i as xe}from"../chunks/lifecycle.y8OLtr5S.js";import{C as Ie}from"../chunks/CloseIcon.Bery5fQo.js";import{e as ke,i as De}from"../chunks/each.DJDUisb8.js";import{r as U}from"../chunks/routes.M12FsiPu.js";import{a as Me}from"../chunks/api.DTgSd7Mi.js";import{s as Te}from"../chunks/trees.AQ0xEAXB.js";import{l as re}from"../chunks/auth.CRT65m0h.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="f34f3e25-8c2f-4e52-9e5c-16e7d7446914",e._sentryDebugIdIdentifier="sentry-dbid-f34f3e25-8c2f-4e52-9e5c-16e7d7446914")}catch{}})();const H=0,M=1,O=2;function Ne(e,s,o,w,b){E&&ie();var f=e,d=ne(),y=me,i=G,c,a,t,u=(d?K:R)(void 0),v=(d?K:R)(void 0),p=!1;function r(n,_){p=!0,_&&(W(l),J(l),B(y));try{n===H&&o&&(c?q(c):c=z(()=>o(f))),n===M&&w&&(a?q(a):a=z(()=>w(f,u))),n===O&&b&&(t?q(t):t=z(()=>b(f,v))),n!==H&&c&&A(c,()=>c=null),n!==M&&a&&A(a,()=>a=null),n!==O&&t&&A(t,()=>t=null)}finally{_&&(B(null),J(null),W(null),ve())}}var l=le(()=>{if(i!==(i=s())){if(fe(i)){var n=i;p=!1,n.then(_=>{n===i&&(S(u,_),r(M,!0))},_=>{if(n===i)throw S(v,_),r(O,!0),v.v}),E||ce(()=>{p||r(H,!0)})}else S(u,i),r(M,!1);return()=>i=G}});E&&(f=de)}const ae=({url:e})=>({searchQuery:e.searchParams.get("q")}),Pe=ae?oe(ae):void 0,la=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"}));var Ee=D('<div><a class="svelte-5k02eh"><img alt="See how good is this tree." class="svelte-5k02eh"></a></div>'),Se=D('<div class="images svelte-5k02eh"></div>'),qe=D('<div class="gallery svelte-5k02eh"><!></div>');function ze(e,s){j(s,!0);var o=qe(),w=g(o);Ne(w,()=>Me.getTree(s.tree.id),null,(b,f)=>{var d=Q(),y=T(d);{var i=a=>{var t=X("Failed to load photos.");h(a,t)},c=a=>{var t=Q(),u=T(t);{var v=r=>{var l=X("No images for this tree.");h(r,l)},p=r=>{var l=Se();ke(l,21,()=>x(f).data.files,De,(n,_)=>{var C=Ee(),P=g(C);I(()=>L(P,"href",U.treeDetails(s.tree.id)));var se=g(P);I(()=>L(se,"src",U.file(x(_).small_id))),m(P),m(C),h(n,C)}),m(l),h(r,l)};Z(u,r=>{x(f).data.files.length==0?r(v):r(p,!1)},!0)}h(a,t)};Z(y,a=>{x(f).status!=200?a(i):a(c,!1)})}h(b,d)}),m(o),h(e,o),F()}var Ae=D('<div class="preview svelte-1hfbc1n"><div class="header svelte-1hfbc1n"><div class="title svelte-1hfbc1n"><a> </a></div> <button class="close svelte-1hfbc1n"><!></button></div> <div class="props"> </div> <!></div>');function He(e,s){j(s,!1);let o=Y(s,"tree",8),w=Y(s,"onClose",8);xe();var b=Q(),f=T(b);{var d=y=>{var i=Ae(),c=g(i),a=g(c),t=g(a);I(()=>L(t,"href",U.treeDetails(o().id)));var u=g(t,!0);m(t),m(a);var v=k(a,2),p=g(v);Ie(p,{}),m(v),m(c);var r=k(c,2),l=g(r,!0);I(()=>$(l,Te(o()))),m(r);var n=k(r,2);ze(n,{get tree(){return o()}}),m(i),I(()=>$(u,o().species)),Ce("click",v,function(..._){var C;(C=w())==null||C.apply(this,_)}),h(y,i)};Z(f,y=>{o()&&y(d)})}h(e,b),F()}const Oe=[40.181389,44.514444],N=ue(re.read("mapState")||{center:Oe,zoom:15});N.subscribe(e=>{re.write("mapState",e)});const Qe=te(N,e=>e.center),Ze=te(N,e=>e.zoom);var Le=D('<!> <div class="mapContainer svelte-1830sq3"><!> <!></div>',1);function fa(e,s){j(s,!0);const o=be(),w=()=>ee(Qe,"$mapCenter",o),b=()=>ee(Ze,"$mapZoom",o),f=s.data.searchQuery;let d=_e(void 0);const y=f?`Map: ${f}`:"Map",i=l=>{V(d,ge(l))},c=()=>{V(d,void 0)},a=(l,n)=>{N.set({center:l,zoom:n})};var t=Le();he(l=>{pe.title="Tree Map"});var u=T(t);ye(u,{title:y});var v=k(u,2),p=g(v);we(p,{get center(){return w()},get zoom(){return b()},onChange:i,onMove:a,searchQuery:f});var r=k(p,2);He(r,{get tree(){return x(d)},onClose:c}),m(v),h(e,t),F()}export{fa as component,la as universal};
