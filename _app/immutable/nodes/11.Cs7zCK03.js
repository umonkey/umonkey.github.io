import{g as X}from"../chunks/entry.CQ-7J7eH.js";import{a as q,w as Z}from"../chunks/api.BXU6TWVt.js";import{e as A}from"../chunks/index.Dh2iu6Hr.js";import"../chunks/disclose-version.DLdO3GTH.js";import{T as $,aE as i,N as B,U as ee,aD as te,O as o,ab as t,a8 as u,P as W,R as Y}from"../chunks/index.xYywNjA9.js";import{h as ae}from"../chunks/svelte-head.WsYdN02J.js";import{a as F,t as G}from"../chunks/template.Bb90HBnx.js";import{a}from"../chunks/props.BtE3_Li4.js";import{r as re}from"../chunks/routes.vdYEh1t8.js";import"../chunks/legacy.B_5ELJdP.js";import{t as M}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.C6tB-bOj.js";import{A as ne}from"../chunks/AuthWrapper._Nntup2V.js";import{B as R}from"../chunks/TextInput.D-IfUt6a.js";import{S as oe,H as se,C as ie,a as ue,b as de,Y as le,L as ce,N as ve}from"../chunks/YearInput.CkG51142.js";import{H as me}from"../chunks/Header.CZRM6Q9l.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new s.Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="ee6d490a-0f88-4a0e-92f7-63142283cbc9",s._sentryDebugIdIdentifier="sentry-dbid-ee6d490a-0f88-4a0e-92f7-63142283cbc9")}catch{}})();const U=async({params:s})=>{const e=s.id;e||A(404);const d=await q.getTree(e);return d.status!==200&&A(404),{id:e,tree:d.data}},fe=U?Z(U):void 0,xe=Object.freeze(Object.defineProperty({__proto__:null,load:fe},Symbol.toStringTag,{value:"Module"}));var pe=G('<!> <!> <!> <!> <!> <!> <!> <!> <div class="buttons"><!> <!></div>',1),ge=G('<!> <div class="form svelte-1jizvdx"><!></div>',1);function Le(s,e){var w,C,E;$(e,!0);const d=e.data.id;let v=i(a(e.data.tree.species??"")),m=i(a(((w=e.data.tree.height)==null?void 0:w.toString())??"0")),f=i(a(((C=e.data.tree.diameter)==null?void 0:C.toString())??"0")),p=i(a(((E=e.data.tree.circumference)==null?void 0:E.toString())??"0")),g=i(a(e.data.tree.state??"")),_=i(a(e.data.tree.notes??"")),l=i(a([e.data.tree.lat,e.data.tree.lon])),h=i(a(e.data.tree.year??""));const c=n=>{if(n===""||n==="0")return null;const y=parseFloat(n);return isNaN(y)?null:y},J=()=>{q.updateTree(d,{species:t(v),height:c(t(m)),diameter:c(t(f)),circumference:c(t(p)),state:t(g),notes:t(_),lat:t(l)[0],lon:t(l)[1],year:c(t(h))}).then(n=>{n.status>=200&&n.status<400?X(re.treeDetails(d)):(console.error(`Error ${n.status} updating tree.`),M.push("Error updating tree."))}).catch(n=>{console.error(`Error updating tree: ${n}.`),M.push("Error updating tree.")})},K=()=>{history.back()};var b=ge();ae(n=>{te.title="Edit tree"});var I=B(b);me(I,{title:"Edit tree"});var S=o(I,2),Q=W(S);ne(Q,{children:(n,y)=>{var D=pe(),N=B(D);oe(N,{get value(){return t(v)},set value(r){u(v,a(r))}});var k=o(N,2);se(k,{get value(){return t(m)},set value(r){u(m,a(r))}});var H=o(k,2);ie(H,{get value(){return t(f)},set value(r){u(f,a(r))}});var T=o(H,2);ue(T,{get value(){return t(p)},set value(r){u(p,a(r))}});var j=o(T,2);de(j,{get value(){return t(g)},set value(r){u(g,a(r))}});var x=o(j,2);le(x,{get value(){return t(h)},set value(r){u(h,a(r))}});var L=o(x,2);ce(L,{get value(){return t(l)},set value(r){u(l,a(r))}});var O=o(L,2);ve(O,{get value(){return t(_)},set value(r){u(_,a(r))}});var P=o(O,2),z=W(P);R(z,{type:"submit",label:"Save changes",onClick:J});var V=o(z,2);R(V,{type:"cancel",label:"Cancel",onClick:K}),Y(P),F(n,D)},$$slots:{default:!0}}),Y(S),F(s,b),ee()}export{Le as component,xe as universal};
