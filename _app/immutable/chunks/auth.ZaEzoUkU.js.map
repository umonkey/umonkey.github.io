{"version":3,"file":"auth.ZaEzoUkU.js","sources":["../../../../../../src/lib/utils/localStorage.ts","../../../../../../src/lib/stores/auth.ts"],"sourcesContent":["/**\n * An object oriented wrapper for localStorage.\n */\n\nclass LocalStorage {\n\tpublic read<T>(key: string): T | undefined {\n\t\ttry {\n\t\t\tconst value = localStorage.getItem(key);\n\n\t\t\tif (value === null) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconsole.debug(`[storage] Read ${key}`);\n\t\t\treturn JSON.parse(value);\n\t\t} catch (e) {\n\t\t\tconsole.error(`[storage] Error reading ${key}: ${e}`);\n\t\t}\n\t}\n\n\tpublic write<T>(key: string, value: T | null): void {\n\t\ttry {\n\t\t\tif (value === undefined || value === null) {\n\t\t\t\tlocalStorage.removeItem(key);\n\t\t\t\tconsole.debug(`[storage] Removed ${key}`);\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem(key, JSON.stringify(value));\n\t\t\t\tconsole.debug(`[storage] Wrote ${key}`);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(`[storage] Error writing ${key}: ${e}`);\n\t\t}\n\t}\n}\n\nexport const ls = new LocalStorage();\n","import { writable, derived } from 'svelte/store';\nimport type { ILoginResponse } from '$lib/types';\nimport { ls } from '$lib/utils/localStorage';\n\nconst STORAGE_KEY = 'auth_state';\n\nexport const authState = writable<ILoginResponse | undefined>(ls.read(STORAGE_KEY));\n\nauthState.subscribe((value: ILoginResponse | undefined) => {\n\tls.write(STORAGE_KEY, value);\n});\n\nexport const isAuthenticated = derived(authState, ($authState) => !!$authState);\n"],"names":["LocalStorage","key","value","e","ls","STORAGE_KEY","authState","writable","isAuthenticated","derived","$authState"],"mappings":"iZAIA,MAAMA,CAAa,CACX,KAAQC,EAA4B,CACtC,GAAA,CACG,MAAAC,EAAQ,aAAa,QAAQD,CAAG,EAEtC,OAAIC,IAAU,KACN,QAGA,QAAA,MAAM,kBAAkBD,CAAG,EAAE,EAC9B,KAAK,MAAMC,CAAK,SACfC,EAAG,CACX,QAAQ,MAAM,2BAA2BF,CAAG,KAAKE,CAAC,EAAE,CAAA,CACrD,CAGM,MAASF,EAAaC,EAAuB,CAC/C,GAAA,CACwBA,GAAU,MACpC,aAAa,WAAWD,CAAG,EACnB,QAAA,MAAM,qBAAqBA,CAAG,EAAE,IAExC,aAAa,QAAQA,EAAK,KAAK,UAAUC,CAAK,CAAC,EACvC,QAAA,MAAM,mBAAmBD,CAAG,EAAE,SAE/BE,EAAG,CACX,QAAQ,MAAM,2BAA2BF,CAAG,KAAKE,CAAC,EAAE,CAAA,CACrD,CAEF,CAEa,MAAAC,EAAK,IAAIJ,EC/BhBK,EAAc,aAEPC,EAAYC,EAAqCH,EAAG,KAAKC,CAAW,CAAC,EAElFC,EAAU,UAAWJ,GAAsC,CACvDE,EAAA,MAAMC,EAAaH,CAAK,CAC5B,CAAC,EAEM,MAAMM,EAAkBC,EAAQH,EAAYI,GAAe,CAAC,CAACA,CAAU"}