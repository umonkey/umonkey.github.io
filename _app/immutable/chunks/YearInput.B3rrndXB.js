import"./disclose-version.DqngkMB6.js";import"./legacy.lHikfPSh.js";import{i as U,p as m,a as D}from"./props.DQcQd9qT.js";import{T as q,H as z}from"./TextInput.C2a4GgkG.js";import{e as H,T as K,P as i,R as o,U as F,O as u,t as M,ac as b,a9 as S,aF as T,Q as B,aQ as R}from"./index.B87wyi30.js";import{i as $,b as C}from"./store.BLO9MExh.js";import{a as k,t as w}from"./template.BfFjc-H-.js";import{r as P,a as G}from"./attributes.H0NIr2B_.js";import{l as J,d as A}from"./events.m1EfLtx7.js";import{M as V}from"./MapIcon.U1qhfQBd.js";import{M as W}from"./Map.B2ueThw2.js";import{e as X,i as Z}from"./each.DvoN57-I.js";import{t as ee}from"./class.xt87COzB.js";import{b as te}from"./input.CutK4IKT.js";import{a as ae}from"./api.BasCzs_O.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="73d22a67-d4dc-4ea6-8fdf-2e4eb7221d54",e._sentryDebugIdIdentifier="sentry-dbid-73d22a67-d4dc-4ea6-8fdf-2e4eb7221d54")}catch{}})();function E(e,t,a){if(e.multiple)return re(e,t);for(var n of e.options){var l=x(n);if(U(l,t)){n.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function ne(e,t){H(()=>{var a=new MutationObserver(()=>{var n=e.__value;E(e,n)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function le(e,t,a=t){var n=!0;J(e,"change",l=>{var r=l?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(r),x);else{var c=e.querySelector(r)??e.querySelector("option:not([disabled])");s=c&&x(c)}a(s)}),H(()=>{var l=t();if(E(e,l,n),n&&l===void 0){var r=e.querySelector(":checked");r!==null&&(l=x(r),a(l))}e.__value=l,n=!1}),ne(e)}function re(e,t){for(var a of e.options)a.selected=~t.indexOf(x(a))}function x(e){return"__value"in e?e.__value:e.value}function Te(e,t){let a=m(t,"value",12,"");q(e,{label:"Canopy diameter, m",type:"number",help:"https://github.com/KanachYerevan/kb/wiki/Measuring-tree-crown",get value(){return a()},set value(n){a(n)},$$legacy:!0})}function $e(e,t){let a=m(t,"value",12,"");q(e,{label:"Trunk circumference, cm",type:"number",hint:"Measure at chest level, aka 120 cm from the ground.",help:"https://github.com/KanachYerevan/kb/wiki/Measuring-trunk-circumference",get value(){return a()},set value(n){a(n)},$$legacy:!0})}function De(e,t){let a=m(t,"value",12,"");q(e,{label:"Height, m",type:"number",help:"https://github.com/KanachYerevan/kb/wiki/Measuring-tree-height",get value(){return a()},set value(n){a(n)},$$legacy:!0})}var oe=w('<div class="mapContainer svelte-x8ryfb"><!></div>');function ie(e,t){K(t,!0);const a=r=>{t.onMove([r.lat,r.lng])};var n=oe(),l=i(n);W(l,{get center(){return t.center},zoom:19,crosshair:!0,onMove:a}),o(n),k(e,n),F()}const se=(e,t)=>{S(t,!b(t))};var ue=w('<div class="hint"> </div>'),ve=w('<div class="input"><label><span> </span> <div class="group svelte-pe0fn"><input type="text"> <button type="button" class="svelte-pe0fn"><!></button></div> <!></label> <!></div>');function He(e,t){let a=m(t,"value",31,()=>D([])),n=m(t,"hint",3,void 0),l=m(t,"label",3,"Location"),r=T(!1);const s=p=>`${p[0]}, ${p[1]}`,c=p=>{a(p)};var v=ve(),_=i(v),h=i(_),d=i(h,!0);o(h);var f=u(h,2),g=i(f);P(g),M(()=>G(g,s(a())));var y=u(g,2);y.__click=[se,r];var I=i(y);V(I),o(y),o(f);var Y=u(f,2);{var j=p=>{ie(p,{get center(){return a()},onMove:c})};$(Y,p=>{b(r)&&p(j)})}o(_);var L=u(_,2);{var N=p=>{var O=ue(),Q=i(O,!0);o(O),M(()=>C(Q,n())),k(p,O)};$(L,p=>{n()&&p(N)})}o(v),M(()=>C(d,l())),k(e,v)}A(["click"]);function Ke(e,t){let a=m(t,"value",12,"");q(e,{label:"Description",multiline:!0,hint:"Add some notable details that could help visitors understand the importance of this tree.",get value(){return a()},set value(n){a(n)},$$legacy:!0})}const ce=(e,t,a)=>{const n=e.target;ae.searchSpecies(n.value).then(l=>{l.status===200&&(S(t,D(l.data)),S(a,b(t).length>0))})},pe=(e,t)=>{setTimeout(()=>{S(t,!1)},200)};var de=(e,t,a)=>t(b(a).name),fe=w('<li class="svelte-1j0o0wm"> <small class="svelte-1j0o0wm"> </small></li>'),me=w('<ul class="options svelte-1j0o0wm"></ul>'),_e=w('<div class="input"><label class="svelte-1j0o0wm"><span class="svelte-1j0o0wm">Species</span> <input type="text" autocomplete="off" placeholder="Type a latin or local name" class="svelte-1j0o0wm"> <!></label> <div class="hint svelte-1j0o0wm">Enter the latin genus of the tree.</div></div>');function Fe(e,t){K(t,!0);let a=m(t,"value",15),n=T(D([])),l=T(!1);const r=d=>{S(l,!1),a(d)};var s=_e(),c=i(s),v=u(i(c),2);P(v),v.__input=[ce,n,l],v.__focusout=[pe,l];var _=u(v,2);{var h=d=>{var f=me();X(f,21,()=>b(n),Z,(g,y)=>{var I=fe();I.__click=[de,r,y];var Y=i(I),j=u(Y),L=i(j);o(j),o(I),M(()=>{C(Y,`${b(y).name??""} `),C(L,`~ ${b(y).local??""}`)}),k(g,I)}),o(f),k(d,f)};$(_,d=>{b(l)>0&&d(h)})}o(c),B(2),o(s),M(()=>ee(c,"drop",b(l))),te(v,a),k(e,s),F()}A(["input","focusout","click"]);var he=w('<div class="input"><label class="svelte-1ogmqdw"><span class="svelte-1ogmqdw">State</span> <div class="group svelte-1ogmqdw"><select class="svelte-1ogmqdw"><option>(unknown)</option><option>healthy</option><option>sick</option><option>deformed</option><option>gone</option><option>stomp</option></select> <!></div></label></div>');function Pe(e,t){let a=m(t,"value",12,"");var n=he(),l=i(n),r=u(i(l),2),s=i(r);M(()=>{a(),R(()=>{})});var c=i(s);c.value=((c.__value="")==null,"");var v=u(c);v.value=(v.__value="healthy")==null?"":"healthy";var _=u(v);_.value=(_.__value="sick")==null?"":"sick";var h=u(_);h.value=(h.__value="deformed")==null?"":"deformed";var d=u(h);d.value=(d.__value="gone")==null?"":"gone";var f=u(d);f.value=(f.__value="stomp")==null?"":"stomp",o(s);var g=u(s,2);z(g,{help:"https://github.com/KanachYerevan/kb/wiki/Understanding-tree-state"}),o(r),o(l),o(n),le(s,a),k(e,n)}function Ae(e,t){let a=m(t,"value",15,"");q(e,{label:"Year planted",type:"number",help:"https://github.com/KanachYerevan/kb/wiki/Year-Planted",get value(){return a()},set value(n){a(n)}})}export{Te as C,De as H,He as L,Ke as N,Fe as S,Ae as Y,$e as a,Pe as b};
