{"version":3,"file":"SignIn.CkEPbBZ_.js","sources":["../../../../../../src/lib/utils/auth.ts","../../../../../../src/lib/components/auth/SignIn.svelte"],"sourcesContent":["import { apiClient } from '$lib/api';\nimport { authState } from '$lib/stores/auth';\nimport { toast } from '@zerodevx/svelte-toast';\n\ntype LoginData = {\n\tcredentials: string;\n};\n\nexport const googleCallbackHandler = async (user: LoginData) => {\n\tconst token = user.credential;\n\n\tconst res = await apiClient.loginWithGoogle(token);\n\n\tif (res.status === 200) {\n\t\tauthState.set(res.data);\n\t\tconsole.info(`Logged in as ${res.data.name}`);\n\t} else {\n\t\ttoast.push(`Error ${res.status} getting an authentication token.`);\n\t}\n};\n","<script lang=\"ts\">\n\timport { googleCallbackHandler } from '$lib/utils/auth';\n\n\twindow.onSignIn = googleCallbackHandler;\n\n\tconst getUxMode = (): string => {\n\t\tif (window.matchMedia('(display-mode: standalone)').matches) {\n\t\t\treturn 'popup'; // should be 'redirect' but isn't working atm\n\t\t}\n\n\t\treturn 'popup';\n\t};\n</script>\n\n<svelte:head>\n\t<script src=\"https://accounts.google.com/gsi/client\" async></script>\n</svelte:head>\n\n<div\n\tid=\"g_id_onload\"\n\tdata-client_id=\"999312923392-6k26jala2pe5dk9u7o63o8nvts3a7f1f.apps.googleusercontent.com\"\n\tdata-context=\"signin\"\n\tdata-ux_mode={getUxMode()}\n\tdata-callback=\"onSignIn\"\n\tdata-itp_support=\"true\"\n></div>\n\n<div\n\tclass=\"g_id_signin\"\n\tdata-type=\"standard\"\n\tdata-shape=\"rectangular\"\n\tdata-theme=\"outline\"\n\tdata-text=\"signin_with\"\n\tdata-size=\"medium\"\n\tdata-locale=\"en-US\"\n\tdata-logo_alignment=\"left\"\n></div>\n"],"names":["googleCallbackHandler","user","token","res","apiClient","authState","toast","getUxMode"],"mappings":"kuBAQa,MAAAA,EAAwB,MAAOC,GAAoB,CAC/D,MAAMC,EAAQD,EAAK,WAEbE,EAAM,MAAMC,EAAU,gBAAgBF,CAAK,EAE7CC,EAAI,SAAW,KACRE,EAAA,IAAIF,EAAI,IAAI,EACtB,QAAQ,KAAK,gBAAgBA,EAAI,KAAK,IAAI,EAAE,GAE5CG,EAAM,KAAK,SAASH,EAAI,MAAM,mCAAmC,CAEnE,wfChBC,OAAO,SAAWH,QAEZO,EAAS,KACV,OAAO,WAAW,4BAA4B,EAAE,QAC5C,8FAeKA,EAAS,CAAA,CAAA"}