var d=Object.defineProperty;var c=(s,e,t)=>e in s?d(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>c(s,typeof e!="symbol"?e+"":e,t);import{i as g,a as p}from"./auth.CChyksl4.js";import{a1 as u}from"./index.Biod19yG.js";import"./disclose-version.BGLjfrjY.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new s.Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="ef4f28e9-c74e-404d-a0be-ee9d7514b0a3",s._sentryDebugIdIdentifier="sentry-dbid-ef4f28e9-c74e-404d-a0be-ee9d7514b0a3")}catch{}})();const f=void 0,T=void 0,A="999312923392-6k26jala2pe5dk9u7o63o8nvts3a7f1f.apps.googleusercontent.com";class h{constructor(){i(this,"root");this.root=f,console.debug(`[api] Root: ${this.root}`)}async getTree(e){return console.debug(`[api] Getting tree ${e}`),await this.request("GET",`v1/trees/${e}`)}async getStats(){return console.debug("[api] Getting stats"),await this.request("GET","v1/trees/stats")}async getMe(e){return await this.request("GET","v1/me",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})}async getMarkers(e,t,o,r,n){const a=new URLSearchParams({n:e.toString(),e:t.toString(),s:o.toString(),w:r.toString()});return n&&a.set("search",n),await this.request("GET","v1/trees?"+a.toString())}async loginWithGoogle(e){return console.debug("[api] Logging in with Google"),await this.request("POST","v2/login/google",{body:JSON.stringify({token:e}),headers:{"Content-Type":"application/json"}})}async updateTree(e,t){return await this.request("PUT",`v1/trees/${e}`,{body:JSON.stringify(t),headers:{"Content-Type":"application/json",...this.getAuthHeaders()}})}async addComment(e,t){const o={"Content-Type":"application/json",...this.getAuthHeaders()};return await this.request("POST",`v1/trees/${e}/comments`,{body:JSON.stringify({message:t}),headers:o})}async request(e,t,o){console.debug(`[api] Requesting ${e} ${this.root}${t}`);const r=new Request(this.root+t,{method:e,...o}),n=await fetch(r),a=n.status==202?void 0:await n.json();return{status:n.status,data:a}}getAuthHeaders(){var e;if(u(g)){const t=(e=u(p))==null?void 0:e.token;if(t)return{Authorization:`Bearer ${t}`}}return{}}}const S=new h;export{A,S as a,T as b};
//# sourceMappingURL=api.D8c_OKvc.js.map
